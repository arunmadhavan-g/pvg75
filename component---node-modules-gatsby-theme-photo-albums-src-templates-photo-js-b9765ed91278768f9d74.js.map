{"version":3,"sources":["webpack:///./node_modules/ramda/src/both.js","webpack:///./node_modules/ramda/src/internal/_xfind.js","webpack:///./node_modules/gatsby-theme-photo-albums/src/styles/Photo.js","webpack:///./node_modules/gatsby-theme-photo-albums/src/hooks/use-key-up.js","webpack:///./node_modules/react-swipeable/es/index.js","webpack:///./node_modules/gatsby-theme-photo-albums/src/hooks/use-swipe-navigate.js","webpack:///./node_modules/react-zoom-pan-pinch/dist/index.es.js","webpack:///./node_modules/gatsby-theme-photo-albums/src/hooks/use-window-dimensions.js","webpack:///./node_modules/gatsby-theme-photo-albums/src/templates/Photo.js","webpack:///./node_modules/gatsby-theme-photo-albums/src/util/photo-dimensions.js","webpack:///./node_modules/ramda/src/internal/_reduced.js","webpack:///./node_modules/ramda/src/find.js","webpack:///./node_modules/ramda/src/and.js","webpack:///./node_modules/ramda/src/propEq.js"],"names":["_curry2","_isFunction","and","lift","both","f","g","apply","this","arguments","module","exports","_reduced","_xfBase","XFind","xf","found","prototype","init","result","input","_xfind","Photo","children","height","sx","variant","useKeyUp","targetKey","useState","keyPressed","setKeyPressed","useEffect","upHandler","e","key","window","addEventListener","removeEventListener","_extends","Object","assign","target","i","length","source","hasOwnProperty","call","defaultProps","preventDefaultTouchmoveEvent","delta","rotationAngle","trackMouse","trackTouch","initialState","xy","swiping","eventData","undefined","start","rotateXYByAngle","pos","angle","angleInRadians","Math","PI","cos","sin","getHandlers","set","handlerProps","onStart","event","touches","state","props","document","onMove","onUp","_ref","clientX","clientY","initial","concat","first","timeStamp","_ref2","_rotateXYByAngle","x","y","deltaX","deltaY","absX","abs","absY","time","velocity","sqrt","dir","getDirection","onSwiping","cancelablePageSwipe","onSwiped","cancelable","preventDefault","onEnd","cleanUpMouse","attachTouch","el","tls","forEach","_ref3","h","_ref4","output","ref","addState","cleanUpTouch","onMouseDown","updateTransientState","useSwipeNavigate","nextUrl","previousUrl","parentUrl","transientState","useRef","type","transientProps","current","_React$useMemo","useMemo","cb","handlers","useSwipeable","onSwipedLeft","navigate","onSwipedRight","onSwipedUp","onSwipedDown","_React$PureComponent","subClass","superClass","Swipeable","_this","_set","create","constructor","__proto__","render","_this$props","className","style","_this$props$nodeName","nodeName","innerRef","_getHandlers","createElement","PureComponent","_extendStatics","d","b","setPrototypeOf","Array","p","__extends","__","_assign","t","s","n","wrapperComponent","contentComponent","previousScale","scale","positionX","positionY","options","disabled","transformEnabled","minPositionX","maxPositionX","minPositionY","maxPositionY","minScale","maxScale","limitToBounds","limitToWrapper","centerContent","wrapperClass","contentClass","wheel","step","wheelEnabled","touchPadEnabled","limitsOnWheel","pan","panAnimationType","lockAxisX","lockAxisY","velocityEqualToMove","velocitySensitivity","velocityActiveScale","velocityMinSpeed","velocityBaseTime","velocityAnimationType","padding","paddingSize","panReturnAnimationTime","panReturnAnimationType","disableOnTarget","pinch","zoomIn","animation","animationType","animationTime","zoomOut","doubleClick","mode","reset","scalePadding","size","roundNumber","num","decimal","Number","toFixed","checkIsNumber","defaultValue","boundLimiter","value","minBound","maxBound","isActive","getDistance","firstPoint","secondPoint","pow","pageX","pageY","deleteUndefinedProps","newObject","keys","handleCallback","callback","handleWheelStop","previousEvent","stateProvider","_a","sign","mergeProps","dynamicProps","reduce","acc","curr","availableAnimations","easeOut","linear","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","handleDisableAnimation","mounted","cancelAnimationFrame","animate","animationName","startTime","Date","getTime","frameTime","requestAnimationFrame","animateComponent","targetState","speed","_b","scaleDiff","positionXDiff","positionYDiff","applyTransformation","checkZoomBounds","zoom","zoomPadding","enablePadding","minScaleWithPadding","isNaN","checkPositionBounds","bounds","paddingValue","paddingX","offsetWidth","paddingY","offsetHeight","wheelMousePosition","contentRect","getBoundingClientRect","mouseX","left","mouseY","top","console","error","handleCalculatePositions","newScale","scaleDifference","newPositionX","newPositionY","getClientPosition","handlePanning","_c","startCoords","_d","positions","calculatedPosition","handlePaddingAnimation","handlePanningAnimation","handlePanToBounds","xChanged","yChanged","mousePosX","mousePosY","handleCalculateZoom","disablePadding","getTarget","isBtnFunction","targetScale","innerWidth","wrapperToWindowScale","max","min","paddingEnabled","handleCalculateBounds","wrapperWidth","wrapperHeight","newContentWidth","newContentHeight","newDiffWidth","newDiffHeight","getComponentsSizes","diffWidth","diffHeight","scaleWidthFactor","scaleHeightFactor","calculateBoundingArea","handleWheelZoom","stopPropagation","customDelta","getDelta","ctrlKey","isLimitedToBounds","_e","handleZoomToPoint","isDisabled","mousePosition","handlePaddingAnimation$1","handleDoubleClick","resetTransformations","getButtonAnimationTime","handleZoomControls","customStep","isZoomIn","animationSpeed","defaultValues","defaultScale","defaultPositionX","defaultPositionY","round","number","checkIfInfinite","Infinity","calculatePinchZoom","currentDistance","pinchStartDistance","pinchStartScale","handleZoomPinch","firstPointX","firstPointY","calculateMidpoint","getCurrentDistance","lastDistance","velocityTimeSpeed","handleEnableVelocity","setState","startAnimation","handleFireVelocity","animateVelocity","velocityX","velocityY","targetX","targetY","newAnimationTime","maxTargetX","minTargetX","maxTargetY","minTargetY","startPosition","customReturnStep","returnAnimation","currentPositionX","getPosition","currentPositionY","calculateVelocityStart","now","lastMousePosition","position_1","distanceX","distanceY","interval","velocityTime","wrapperToWindowScaleX","wrapperToWindowScaleY","innerHeight","velocity_1","throttle","clearTimeout","setTimeout","position","isLocked","panReturnStep","offset","minTarget","maxTarget","newPosition","propsList","getValidPropsFromObject","includes","Context","createContext","wheelStopEventTimer","wheelAnimationTimer","_super","StateProvider","dynamicValues","windowToWrapperScaleX","windowToWrapperScaleY","isDown","distance","offsetX","offsetY","previousWheelEvent","lastScale","maxBounds","handleWheel","onWheelStart","onWheel","onWheelStop","getCallbackProps","checkPanningTarget","map","tag","toUpperCase","tagName","find","element","classList","checkIsPanningActive","handleSetUpPanning","onPanningStart","handleStartPanning","contains","onPanning","handleStopPanning","onPanningStop","handlePinchStart","onPinchingStart","handlePinch","onPinching","handlePinchStop","onPinchingStop","handleTouchStart","handleTouch","handleTouchStop","Error","handleDbClick","setScale","setPositionX","newPosX","setPositionY","newPosY","setTransform","resetTransform","setDefaultState","forceUpdate","setWrapperComponent","setContentComponent","transform","WebkitTransform","startTime_1","interval_1","setInterval","clearInterval","posX","posY","onZoomChange","componentDidMount","componentWillUnmount","componentDidUpdate","oldProps","oldState","wrapper","getWindowScaleY","loaded","Boolean","dispatch","nodes","content","Provider","rest","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__rest","styles","css","insertAt","head","getElementsByTagName","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","styleInject","TransformComponent","wrapperRef","createRef","contentRef","context","Component","getWindowDimensions","width","orientation","contextType","data","path","pageContext","pathPrefix","site","compose","removeFileExtension","removePathPrefix","decodeURI","title","pathToFileTitle","windowDimensions","setWindowDimensions","useLayoutEffect","handleResize","useWindowDimensions","dimensions","ratio","maxWidth","maxHeight","photoDimensions","file","keyUpActions","navigateTo","wasPressed","keyboardAction","isNotNil","prop","propEq","swipeDisabled","setSwipeDisabled","panDisabled","swipeNavigation","swipeHandlers","Layout","data-testid","to","fixed","photo","childImageSharp","alt","loading","draggable","_dispatchable","fn","list","idx","len","a","_curry3","equals","name","val","obj"],"mappings":";gFAAA,IAAIA,EAAuB,EAAQ,QAE/BC,EAA2B,EAAQ,QAEnCC,EAAmB,EAAQ,QAE3BC,EAAoB,EAAQ,QAkC5BC,EAAoBJ,GAAQ,SAAcK,EAAGC,GAC/C,OAAOL,EAAYI,GAAK,WACtB,OAAOA,EAAEE,MAAMC,KAAMC,YAAcH,EAAEC,MAAMC,KAAMC,YAC/CN,EAAKD,EAALC,CAAUE,EAAGC,MAGnBI,EAAOC,QAAUP,G,uBC9CjB,IAAIJ,EAAuB,EAAQ,QAE/BY,EAAwB,EAAQ,QAEhCC,EAAuB,EAAQ,QAE/BC,EAAqB,WACvB,SAASA,EAAMT,EAAGU,GAChBP,KAAKO,GAAKA,EACVP,KAAKH,EAAIA,EACTG,KAAKQ,OAAQ,EAsBf,OAnBAF,EAAMG,UAAU,qBAAuBJ,EAAQK,KAE/CJ,EAAMG,UAAU,uBAAyB,SAAUE,GAKjD,OAJKX,KAAKQ,QACRG,EAASX,KAAKO,GAAG,qBAAqBI,OAAQ,IAGzCX,KAAKO,GAAG,uBAAuBI,IAGxCL,EAAMG,UAAU,qBAAuB,SAAUE,EAAQC,GAMvD,OALIZ,KAAKH,EAAEe,KACTZ,KAAKQ,OAAQ,EACbG,EAASP,EAASJ,KAAKO,GAAG,qBAAqBI,EAAQC,KAGlDD,GAGFL,EA1BgB,GA6BrBO,EAAsBrB,GAAQ,SAAgBK,EAAGU,GACnD,OAAO,IAAID,EAAMT,EAAGU,MAGtBL,EAAOC,QAAUU,G,4PCtBFC,EAbD,SAAC,GAAD,IAAEC,EAAF,EAAEA,SAAUC,EAAZ,EAAYA,OAAZ,OACZ,mBAAKC,GAAI,CAACC,QAAS,YAAaF,WAC7BD,I,wBCHU,SAASI,EAASC,GAE/B,MAAoCC,oBAAS,GAAtCC,EAAP,KAAmBC,EAAnB,KAiBA,OAdAC,qBAAU,WAER,IAAMC,EAAY,SAACC,GACbA,EAAEC,MAAQP,GACZG,GAAc,IAKlB,OAFAK,OAAOC,iBAAiB,QAASJ,GAE1B,WACLG,OAAOE,oBAAoB,QAASL,MAErC,CAACL,IAEGE,ECpBT,SAASS,IAeP,OAdAA,EAAWC,OAAOC,QAAU,SAAUC,GACpC,IAAK,IAAIC,EAAI,EAAGA,EAAIlC,UAAUmC,OAAQD,IAAK,CACzC,IAAIE,EAASpC,UAAUkC,GAEvB,IAAK,IAAIR,KAAOU,EACVL,OAAOvB,UAAU6B,eAAeC,KAAKF,EAAQV,KAC/CO,EAAOP,GAAOU,EAAOV,IAK3B,OAAOO,IAGOnC,MAAMC,KAAMC,WAS9B,IAAIuC,EAAe,CACjBC,8BAA8B,EAC9BC,MAAO,GACPC,cAAe,EACfC,YAAY,EACZC,YAAY,GAEVC,EAAe,CACjBC,GAAI,CAAC,EAAG,GACRC,SAAS,EACTC,eAAWC,EACXC,WAAOD,GA0BT,SAASE,EAAgBC,EAAKC,GAC5B,GAAc,IAAVA,EAAa,OAAOD,EACxB,IAAIE,EAAiBC,KAAKC,GAAK,IAAMH,EAGrC,MAAO,CAFCD,EAAI,GAAKG,KAAKE,IAAIH,GAAkBF,EAAI,GAAKG,KAAKG,IAAIJ,GACtDF,EAAI,GAAKG,KAAKE,IAAIH,GAAkBF,EAAI,GAAKG,KAAKG,IAAIJ,IAIhE,SAASK,EAAYC,EAAKC,GACxB,IAAIC,EAAU,SAAiBC,GAEzBA,EAAMC,SAAWD,EAAMC,QAAQ7B,OAAS,GAC5CyB,GAAI,SAAUK,EAAOC,GAEfA,EAAMvB,aACRwB,SAASvC,iBAhCD,YAgC6BwC,GACrCD,SAASvC,iBAhCH,UAgC6ByC,IAGrC,IAAIC,EAAOP,EAAMC,QAAUD,EAAMC,QAAQ,GAAKD,EAI1CjB,EAAKK,EAAgB,CAHXmB,EAAKC,QACLD,EAAKE,SAE0BN,EAAMxB,eACnD,OAAOZ,EAAS,GAAImC,EAAOpB,EAAc,CACvCG,UAAW,CACTyB,QAAS,GAAGC,OAAO5B,GACnB6B,OAAO,GAET7B,GAAIA,EACJI,MAAOa,EAAMa,WAAa,QAK5BR,EAAS,SAAgBL,GAC3BH,GAAI,SAAUK,EAAOC,GACnB,IAAKD,EAAMnB,GAAG,KAAOmB,EAAMnB,GAAG,IAAMiB,EAAMC,SAAWD,EAAMC,QAAQ7B,OAAS,EAC1E,OAAO8B,EAGT,IAAIY,EAAQd,EAAMC,QAAUD,EAAMC,QAAQ,GAAKD,EAI3Ce,EAAmB3B,EAAgB,CAHzB0B,EAAMN,QACNM,EAAML,SAEuCN,EAAMxB,eAC7DqC,EAAID,EAAiB,GACrBE,EAAIF,EAAiB,GAErBG,EAAShB,EAAMnB,GAAG,GAAKiC,EACvBG,EAASjB,EAAMnB,GAAG,GAAKkC,EACvBG,EAAO5B,KAAK6B,IAAIH,GAChBI,EAAO9B,KAAK6B,IAAIF,GAChBI,GAAQvB,EAAMa,WAAa,GAAKX,EAAMf,MACtCqC,EAAWhC,KAAKiC,KAAKL,EAAOA,EAAOE,EAAOA,IAASC,GAAQ,GAE/D,GAAIH,EAAOjB,EAAMzB,OAAS4C,EAAOnB,EAAMzB,QAAUwB,EAAMlB,QAAS,OAAOkB,EACvE,IAAIwB,EAvEV,SAAsBN,EAAME,EAAMJ,EAAQC,GACxC,OAAIC,EAAOE,EACLJ,EAAS,EAZN,OACC,QAgBCC,EAAS,EAfb,KACE,OA8EKQ,CAAaP,EAAME,EAAMJ,EAAQC,GAEvClC,EAAYlB,EAAS,GAAImC,EAAMjB,UAAW,CAC5Ce,MAAOA,EACPoB,KAAMA,EACNE,KAAMA,EACNJ,OAAQA,EACRC,OAAQA,EACRK,SAAUA,EACVE,IAAKA,IAGPvB,EAAMyB,WAAazB,EAAMyB,UAAU3C,GAGnC,IAAI4C,GAAsB,EAQ1B,OANI1B,EAAMyB,WAAazB,EAAM2B,UAAY3B,EAAM,WAAauB,MAC1DG,GAAsB,GAGpBA,GAAuB1B,EAAM1B,8BAAgC0B,EAAMtB,YAAcmB,EAAM+B,YAAY/B,EAAMgC,iBAEtGjE,EAAS,GAAImC,EAAO,CACzBjB,UAAWlB,EAAS,GAAIkB,EAAW,CACjC2B,OAAO,IAET5B,SAAS,QAKXiD,EAAQ,SAAejC,GACzBH,GAAI,SAAUK,EAAOC,GACnB,IAAIlB,EAUJ,OARIiB,EAAMlB,UACRC,EAAYlB,EAAS,GAAImC,EAAMjB,UAAW,CACxCe,MAAOA,IAETG,EAAM2B,UAAY3B,EAAM2B,SAAS7C,GACjCkB,EAAM,WAAalB,EAAUyC,MAAQvB,EAAM,WAAalB,EAAUyC,KAAKzC,IAGlElB,EAAS,GAAImC,EAAOpB,EAAc,CACvCG,UAAWA,QAKbiD,EAAe,WAEjB9B,SAAStC,oBA9HG,YA8H4BuC,GACxCD,SAAStC,oBA9HC,UA8H4BwC,IAGpCA,EAAO,SAAc5C,GACvBwE,IACAD,EAAMvE,IAGJyE,EAAc,SAAqBC,GACrC,GAAIA,GAAMA,EAAGvE,iBAAkB,CAE7B,IAAIwE,EAAM,CAAC,CA7IA,aA6IatC,GAAU,CA5IxB,YA4IoCM,GAAS,CA3I9C,WA2IyD4B,IAOlE,OANAI,EAAIC,SAAQ,SAAUC,GACpB,IAAI7E,EAAI6E,EAAM,GACVC,EAAID,EAAM,GACd,OAAOH,EAAGvE,iBAAiBH,EAAG8E,MAGzB,WACL,OAAOH,EAAIC,SAAQ,SAAUG,GAC3B,IAAI/E,EAAI+E,EAAM,GACVD,EAAIC,EAAM,GACd,OAAOL,EAAGtE,oBAAoBJ,EAAG8E,SAiCrCE,EAAS,CACXC,IA5BU,SAAeP,GAGd,OAAPA,GACJvC,GAAI,SAAUK,EAAOC,GAEnB,GAAID,EAAMkC,KAAOA,EAAI,OAAOlC,EAC5B,IAAI0C,EAAW,GAaf,OAXI1C,EAAMkC,IAAMlC,EAAMkC,KAAOA,GAAMlC,EAAM2C,eACvC3C,EAAM2C,eACND,EAASC,aAAe,MAItB1C,EAAMtB,YAAcuD,IACtBQ,EAASC,aAAeV,EAAYC,IAI/BrE,EAAS,GAAImC,EAAO,CACzBkC,GAAIA,GACHQ,QAcP,OAJI9C,EAAalB,aACf8D,EAAOI,YAAc/C,GAGhB,CAAC2C,EAAQP,GAGlB,SAASY,EAAqB7C,EAAOC,EAAOgC,GAC1C,IAAIS,EAAW,GAYf,OAVKzC,EAAMtB,YAAcqB,EAAM2C,cAC7B3C,EAAM2C,eACND,EAASC,aAAe,MACf1C,EAAMtB,aAAeqB,EAAM2C,cAEhC3C,EAAMkC,KACRQ,EAASC,aAAeV,EAAYjC,EAAMkC,KAIvCrE,EAAS,GAAImC,EAAO0C,GC1Pd,SAASI,EAAiBC,EAASC,EAAaC,GAU7D,ODmPF,SAAsBhD,GACpB,IAAIvB,EAAauB,EAAMvB,WACnBwE,EAAiB,IAAMC,OAAOtF,EAAS,GAAIe,EAAc,CAC3DwE,KAAM,UAEJC,EAAiB,IAAMF,SAC3BE,EAAeC,QAAUzF,EAAS,GAAIS,EAAc2B,GAEpD,IAAIsD,EAAiB,IAAMC,SAAQ,WACjC,OAAO9D,GAAY,SAAU+D,GAC3B,OAAOP,EAAeI,QAAUG,EAAGP,EAAeI,QAASD,EAAeC,WACzE,CACD5E,WAAYA,MAEb,CAACA,IACAgF,EAAWH,EAAe,GAC1BtB,EAAcsB,EAAe,GAGjC,OADAL,EAAeI,QAAUT,EAAqBK,EAAeI,QAASD,EAAeC,QAASrB,GACvFyB,EC9QeC,CAAa,CACjCC,aAAc,WAAWb,GAAUc,mBAASd,IAC5Ce,cAAe,WAAWd,GAAca,mBAASb,IACjDe,WAAY,WAAWd,GAAYY,mBAASZ,IAC5Ce,aAAc,WAAWf,GAAYY,mBAASZ,IAC9CvE,YAAY,KD4Qa,SAAUuF,GAlQvC,IAAwBC,EAAUC,EAqQhC,SAASC,EAAUnE,GACjB,IAAIoE,EAWJ,OATAA,EAAQJ,EAAqB5F,KAAKvC,KAAMmE,IAAUnE,MAE5CwI,KAAO,SAAUb,GACrBY,EAAMnB,eAAiBO,EAAGY,EAAMnB,eAAgBmB,EAAMpE,QAGxDoE,EAAMnB,eAAiBrF,EAAS,GAAIe,EAAc,CAChDwE,KAAM,UAEDiB,EAgCT,OAjTgCF,EAmQNF,GAnQJC,EAmQPE,GAlQN7H,UAAYuB,OAAOyG,OAAOJ,EAAW5H,WAC9C2H,EAAS3H,UAAUiI,YAAcN,EACjCA,EAASO,UAAYN,EAiRRC,EAAU7H,UAEhBmI,OAAS,WACd,IAAIC,EAAc7I,KAAKmE,MACnB2E,EAAYD,EAAYC,UACxBC,EAAQF,EAAYE,MACpBC,EAAuBH,EAAYI,SACnCA,OAAoC,IAAzBD,EAAkC,MAAQA,EACrDE,EAAWL,EAAYK,SACvBnI,EAAW8H,EAAY9H,SACvB6B,EAAaiG,EAAYjG,WAEzBuG,EAAevF,EAAY5D,KAAKwI,KAAM,CACxC5F,WAAYA,IAEVgF,EAAWuB,EAAa,GACxBhD,EAAcgD,EAAa,GAE/BnJ,KAAKoH,eAAiBL,EAAqB/G,KAAKoH,eAAgBpH,KAAKmE,MAAOgC,GAC5E,IAAIQ,EAAMuC,EAAW,SAAU9C,GAC7B,OAAO8C,EAAS9C,GAAKwB,EAASjB,IAAIP,IAChCwB,EAASjB,IACb,OAAO,IAAMyC,cAAcH,EAAUlH,EAAS,GAAI6F,EAAU,CAC1DkB,UAAWA,EACXC,MAAOA,EACPpC,IAAKA,IACH5F,IAGCuH,EA/CoB,CAgD3B,IAAMe,gBAEE7G,aAAeA,EEtTzB,IAAI8G,EAAiB,SAAuBC,EAAGC,GAW7C,OAVAF,EAAiBtH,OAAOyH,gBAAkB,CACxCd,UAAW,cACAe,OAAS,SAAUH,EAAGC,GACjCD,EAAEZ,UAAYa,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAIG,KAAKH,EACRA,EAAElH,eAAeqH,KAAIJ,EAAEI,GAAKH,EAAEG,MAIhBJ,EAAGC,IAG3B,SAASI,EAAUL,EAAGC,GAGpB,SAASK,IACP7J,KAAK0I,YAAca,EAHrBD,EAAeC,EAAGC,GAMlBD,EAAE9I,UAAkB,OAAN+I,EAAaxH,OAAOyG,OAAOe,IAAMK,EAAGpJ,UAAY+I,EAAE/I,UAAW,IAAIoJ,GAGjF,IAAIC,EAAU,WAaZ,OAZAA,EAAU9H,OAAOC,QAAU,SAAkB8H,GAC3C,IAAK,IAAIC,EAAG7H,EAAI,EAAG8H,EAAIhK,UAAUmC,OAAQD,EAAI8H,EAAG9H,IAG9C,IAAK,IAAIwH,KAFTK,EAAI/J,UAAUkC,GAGRH,OAAOvB,UAAU6B,eAAeC,KAAKyH,EAAGL,KAAII,EAAEJ,GAAKK,EAAEL,IAI7D,OAAOI,IAGMhK,MAAMC,KAAMC,YAgB7B,IAAI,EAAe,CACjBiK,iBAAkB,KAClBC,iBAAkB,KAClBC,cAAe,EACfC,MAAO,EACPC,UAAW,EACXC,UAAW,EACXC,QAAS,CACPC,UAAU,EACVC,kBAAkB,EAClBC,aAAc,KACdC,aAAc,KACdC,aAAc,KACdC,aAAc,KACdC,SAAU,EACVC,SAAU,EACVC,eAAe,EACfC,gBAAgB,EAChBC,eAAe,EACfC,aAAc,GACdC,aAAc,IAEhBC,MAAO,CACLb,UAAU,EACVc,KAAM,EACNC,cAAc,EACdC,iBAAiB,EACjBC,eAAe,GAEjBC,IAAK,CACHlB,UAAU,EACVmB,iBAAkB,SAClBC,WAAW,EACXC,WAAW,EACXtG,UAAU,EACVuG,qBAAqB,EACrBC,oBAAqB,EACrBC,oBAAqB,EACrBC,iBAAkB,EAClBC,iBAAkB,KAClBC,sBAAuB,eACvBC,SAAS,EACTC,YAAa,GACbC,uBAAwB,IACxBC,uBAAwB,UACxBC,gBAAiB,IAEnBC,MAAO,CACLjC,UAAU,GAEZkC,OAAQ,CACNlC,UAAU,EACVc,KAAM,GACNqB,WAAW,EACXC,cAAe,UACfC,cAAe,KAEjBC,QAAS,CACPtC,UAAU,EACVc,KAAM,GACNqB,WAAW,EACXC,cAAe,UACfC,cAAe,KAEjBE,YAAa,CACXvC,UAAU,EACVc,KAAM,GACN0B,KAAM,SACNL,WAAW,EACXC,cAAe,UACfC,cAAe,KAEjBI,MAAO,CACLzC,UAAU,EACVmC,WAAW,EACXC,cAAe,UACfC,cAAe,KAEjBK,aAAc,CACZ1C,UAAU,EACV2C,KAAM,GACNN,cAAe,IACfD,cAAe,YAQfQ,EAAc,SAAqBC,EAAKC,GAC1C,OAAOC,OAAOF,EAAIG,QAAQF,KASxBG,EAAgB,SAAuBJ,EAAKK,GAC9C,MAAsB,iBAARL,EAAmBA,EAAMK,GAWrCC,EAAe,SAAsBC,EAAOC,EAAUC,EAAUC,GAClE,OAC6BX,EADxBW,EACDH,EAAQC,EAA6BA,EACrCD,EAAQE,EAA6BA,EACtBF,EAHeA,EACiB,IA4BjDI,EAAc,SAAqBC,EAAYC,GACjD,OAAO3K,KAAKiC,KAAKjC,KAAK4K,IAAIF,EAAWG,MAAQF,EAAYE,MAAO,GAAK7K,KAAK4K,IAAIF,EAAWI,MAAQH,EAAYG,MAAO,KAQlHC,EAAuB,SAA8BV,GACvD,IAAIW,EAAY1E,EAAQ,GAAI+D,GAK5B,OAHA7L,OAAOyM,KAAKD,GAAWlI,SAAQ,SAAU3E,GACvC,YAA0BuB,IAAnBsL,EAAU7M,WAA6B6M,EAAU7M,MAEnD6M,GAOLE,EAAiB,SAAwBC,EAAUxK,GACjDwK,GAAgC,mBAAbA,GACrBA,EAASxK,IAITyK,EAAkB,SAAyBC,EAAe7K,EAAO8K,GACnE,IAAIzE,EAAQyE,EAAczE,MACtB0E,EAAKD,EAActE,QACnBQ,EAAW+D,EAAG/D,SACdD,EAAWgE,EAAGhE,SAClB,QAAK8D,IACDxE,EAAQW,GAAYX,EAAQU,IAC5BvH,KAAKwL,KAAKH,EAAc1J,UAAY3B,KAAKwL,KAAKhL,EAAMmB,UACpD0J,EAAc1J,OAAS,GAAK0J,EAAc1J,OAASnB,EAAMmB,SACzD0J,EAAc1J,OAAS,GAAK0J,EAAc1J,OAASnB,EAAMmB,QACzD3B,KAAKwL,KAAKH,EAAc1J,UAAY3B,KAAKwL,KAAKhL,EAAMmB,aAItD8J,EAAa,SAAoBnM,EAAcoM,GACjD,OAAOlN,OAAOyM,KAAK3L,GAAcqM,QAAO,SAAUC,EAAKC,GAOrD,MANkC,iBAAvBH,EAAaG,IAA6C,OAAvBH,EAAaG,GACzDD,EAAIC,GAAQvF,EAAQA,EAAQ,GAAIhH,EAAauM,IAAQH,EAAaG,IAElED,EAAIC,QAA+BnM,IAAvBgM,EAAaG,GAAsBvM,EAAauM,GAAQH,EAAaG,GAG5ED,IACN,KAkBL,IAqEIE,EAAsB,CACxBC,QAtEY,SAAiBxF,GAC7B,OAAQvG,KAAKE,IAAIqG,EAAIvG,KAAKC,IAAM,EAAI,IAsEpC+L,OAlEW,SAAgBzF,GAC3B,OAAOA,GAkEP0F,WA9De,SAAoB1F,GACnC,OAAOA,EAAIA,GA8DX2F,YA1DgB,SAAqB3F,GACrC,OAAOA,GAAK,EAAIA,IA0DhB4F,cAtDkB,SAAuB5F,GACzC,OAAOA,EAAI,GAAM,EAAIA,EAAIA,GAAU,EAAI,EAAIA,GAAKA,EAAlB,GAsD9B6F,YAlDgB,SAAqB7F,GACrC,OAAOA,EAAIA,EAAIA,GAkDf8F,aA9CiB,SAAsB9F,GACvC,QAASA,EAAIA,EAAIA,EAAI,GA8CrB+F,eA1CmB,SAAwB/F,GAC3C,OAAOA,EAAI,GAAM,EAAIA,EAAIA,EAAIA,GAAKA,EAAI,IAAM,EAAIA,EAAI,IAAM,EAAIA,EAAI,GAAK,GA0CvEgG,YAtCgB,SAAqBhG,GACrC,OAAOA,EAAIA,EAAIA,EAAIA,GAsCnBiG,aAlCiB,SAAsBjG,GACvC,OAAO,KAAMA,EAAIA,EAAIA,EAAIA,GAkCzBkG,eA9BmB,SAAwBlG,GAC3C,OAAOA,EAAI,GAAM,EAAIA,EAAIA,EAAIA,EAAIA,EAAI,EAAI,IAAMA,EAAIA,EAAIA,EAAIA,GA8B3DmG,YA1BgB,SAAqBnG,GACrC,OAAOA,EAAIA,EAAIA,EAAIA,EAAIA,GA0BvBoG,aAtBiB,SAAsBpG,GACvC,OAAO,IAAMA,EAAIA,EAAIA,EAAIA,EAAIA,GAsB7BqG,eAlBmB,SAAwBrG,GAC3C,OAAOA,EAAI,GAAM,GAAKA,EAAIA,EAAIA,EAAIA,EAAIA,EAAI,EAAI,KAAOA,EAAIA,EAAIA,EAAIA,EAAIA,IAoBvE,SAASsG,IACFrQ,KAAKsQ,UAENtQ,KAAK4M,WACP2D,qBAAqBvQ,KAAK4M,WAG5B5M,KAAKwQ,SAAU,EACfxQ,KAAK4M,WAAY,EACjB5M,KAAKwF,UAAW,GAGlB,SAASgL,EAAQC,EAAe3D,EAAe6B,GAC7C,IAAIpG,EAAQvI,KAEZ,GAAKA,KAAKsQ,QAAV,CACA,IAAII,GAAY,IAAIC,MAAOC,UAG3BP,EAAuB9N,KAAKvC,MAE5BA,KAAK4M,UAAY,WACf,GAAKrE,EAAMqE,WAAcrE,EAAM+H,QAA/B,CACA,IAAIO,GAAY,IAAIF,MAAOC,UAAYF,EAGnCnF,GAAOsB,EADSyC,EAAoBmB,IADhBI,EAAY/D,GAIhC+D,GAAa/D,GACf6B,EAZW,GAaXpG,EAAMqE,UAAY,OAElB+B,EAASpD,GACTuF,sBAAsBvI,EAAMqE,cAIhCkE,sBAAsB9Q,KAAK4M,YAG7B,SAASmE,EAAiBhC,GACxB,IAAIxG,EAAQvI,KAERgR,EAAcjC,EAAGiC,YACjBC,EAAQlC,EAAGkC,MACX3J,EAAOyH,EAAGzH,KACV4J,EAAKlR,KAAK8O,cACVzE,EAAQ6G,EAAG7G,MACXC,EAAY4G,EAAG5G,UACfC,EAAY2G,EAAG3G,UACf4G,EAAYH,EAAY3G,MAAQA,EAChC+G,EAAgBJ,EAAY1G,UAAYA,EACxC+G,EAAgBL,EAAYzG,UAAYA,EAE9B,IAAV0G,GACFjR,KAAK8O,cAAc1E,cAAgBpK,KAAK8O,cAAczE,MACtDrK,KAAK8O,cAAczE,MAAQ2G,EAAY3G,MACvCrK,KAAK8O,cAAcxE,UAAY0G,EAAY1G,UAC3CtK,KAAK8O,cAAcvE,UAAYyG,EAAYzG,UAC3CvK,KAAKsR,uBAGLd,EAAQjO,KAAKvC,KAAMsH,EAAM2J,GAAO,SAAU1F,GACxChD,EAAMuG,cAAc1E,cAAgB7B,EAAMuG,cAAczE,MACxD9B,EAAMuG,cAAczE,MAAQA,EAAQ8G,EAAY5F,EAChDhD,EAAMuG,cAAcxE,UAAYA,EAAY8G,EAAgB7F,EAC5DhD,EAAMuG,cAAcvE,UAAYA,EAAY8G,EAAgB9F,EAE5DhD,EAAM+I,yBAKZ,SAASC,EAAgBC,EAAMzG,EAAUC,EAAUyG,EAAaC,GAC9D,IACIC,EAAsB5G,GADP2G,EAAgBD,EAAc,GAEjD,OAAKG,MAAM5G,IAAawG,GAAQxG,EAAiBA,GAC5C4G,MAAM7G,IAAayG,GAAQG,EAA4BA,EACrDH,EAGT,SAASK,EAAoBvH,EAAWC,EAAWuH,EAAQ7G,EAAe8G,EAAc7H,GACtF,IAAIS,EAAemH,EAAOnH,aACtBE,EAAeiH,EAAOjH,aACtBD,EAAekH,EAAOlH,aACtBE,EAAegH,EAAOhH,aACtBkH,EAAW9H,EAAmB6H,EAAe7H,EAAiB+H,YAAc,IAAM,EAClFC,EAAWhI,EAAmB6H,EAAe7H,EAAiBiI,aAAe,IAAM,EAGvF,MAAO,CACLnN,EAHM4I,EAAatD,EAAWK,EAAeqH,EAAUpH,EAAeoH,EAAU/G,GAIhFhG,EAHM2I,EAAarD,EAAWM,EAAeqH,EAAUpH,EAAeoH,EAAUjH,IAapF,SAASmH,EAAmBpO,EAAOmG,EAAkBE,GACnD,IAAIgI,EAAclI,EAAiBmI,wBAE/BC,GAAUvO,EAAMQ,QAAU6N,EAAYG,MAAQnI,EAC9CoI,GAAUzO,EAAMS,QAAU4N,EAAYK,KAAOrI,EAEjD,OADIuH,MAAMW,IAAWX,MAAMa,KAASE,QAAQC,MAAM,kCAC3C,CACLL,OAAQA,EACRE,OAAQA,GAuBZ,SAASI,EAAyBN,EAAQE,EAAQK,EAAUhB,EAAQ7G,GAClE,IAAI8D,EAAK/O,KAAK8O,cACVzE,EAAQ0E,EAAG1E,MACXC,EAAYyE,EAAGzE,UACfC,EAAYwE,EAAGxE,UACfG,EAAmBqE,EAAGvE,QAAQE,iBAC9BqI,EAAkBD,EAAWzI,EACjC,MAAsB,iBAAXkI,GAAyC,iBAAXE,EAA4BE,QAAQC,MAAM,6CAC9ElI,EAQcmH,EAJOvH,EAAYiI,EAASQ,EACrBxI,EAAYkI,EAASM,EAGkCjB,EAAQ7G,EAAe,EAAG,MAR7E,CAC5B+H,aAAc1I,EACd2I,aAAc1I,GAUlB,SAAS2I,EAAkBlP,GACzB,IAAIC,EAAUD,EAAMC,QAEpB,OAAIA,GAA8B,IAAnBA,EAAQ7B,OACd,CACLoC,QAASP,EAAQ,GAAGO,QACpBC,QAASR,EAAQ,GAAGQ,SAKnBR,EAOE,KANE,CACLO,QAASR,EAAMQ,QACfC,QAAST,EAAMS,SAOrB,SAAS0O,GAAcnP,GACrB,IAAI+K,EAAK/O,KAAK8O,cACVzE,EAAQ0E,EAAG1E,MACXC,EAAYyE,EAAGzE,UACfC,EAAYwE,EAAGxE,UACf2G,EAAKnC,EAAGvE,QACRS,EAAgBiG,EAAGjG,cACnBF,EAAWmG,EAAGnG,SACdqI,EAAKrE,EAAGpD,IACRE,EAAYuH,EAAGvH,UACfC,EAAYsH,EAAGtH,UACfO,EAAU+G,EAAG/G,QACbC,EAAc8G,EAAG9G,YACjBpC,EAAmB6E,EAAG7E,iBAC1B,GAAKlK,KAAKqT,YAAV,CACA,IAAIC,EAAKtT,KAAKqT,YACVrO,EAAIsO,EAAGtO,EACPC,EAAIqO,EAAGrO,EACPsO,EAAYL,EAAkBlP,GAClC,IAAKuP,EAAW,OAAOZ,QAAQC,MAAM,sCACrC,IAAIpO,EAAU+O,EAAU/O,QACpBC,EAAU8O,EAAU9O,QAIpBuO,EAAenH,EAAYvB,EAFlB9F,EAAUQ,EAGnBiO,EAAenH,EAAYvB,EAFlB9F,EAAUQ,EAInB8M,EAAe1F,GAAWhC,GAASU,EAAWuB,EAAc,EAEhE,GAAI0G,IAAiB1I,GAAa2I,IAAiB1I,EAAnD,CACA,IAAIiJ,EAAqB3B,EAAoBmB,EAAcC,EAAcjT,KAAK8R,OAAQ7G,EAAe8G,EAAc7H,GAEnHuJ,GAAuBlR,KAAKvC,KAAMwT,EAAmBxO,EAAGwO,EAAmBvO,KAG7E,SAASyO,KACP,IAAI3E,EAAK/O,KAAK8O,cACVzE,EAAQ0E,EAAG1E,MACXU,EAAWgE,EAAGvE,QAAQO,SACtBmG,EAAKnC,EAAGpD,IACRlB,EAAWyG,EAAGzG,SACd4B,EAAU6E,EAAG7E,QACbE,EAAyB2E,EAAG3E,uBAC5BC,EAAyB0E,EAAG1E,uBAEhC,KADiB/B,GAAYJ,EAAQU,IAAasB,GAClD,CACA,IAAI2E,EAAc2C,GAAkBpR,KAAKvC,MACzC+Q,EAAiBxO,KAAKvC,KAAM,CAC1BgR,YAAaA,EACbC,MAAO1E,EACPjF,KAAMkF,KAIV,SAASmH,KACP,IAAI5E,EAAK/O,KAAK8O,cACVxE,EAAYyE,EAAGzE,UACfC,EAAYwE,EAAGxE,UACfF,EAAQ0E,EAAG1E,MACX6G,EAAKnC,EAAGvE,QACRC,EAAWyG,EAAGzG,SACdQ,EAAgBiG,EAAGjG,cACnBC,EAAiBgG,EAAGhG,eACpBhB,EAAmBlK,KAAKkE,MAAMgG,iBAClC,IAAIO,EAAJ,CACA,IAAI2I,EAAKpT,KAAK8R,OACVlH,EAAewI,EAAGxI,aAClBD,EAAeyI,EAAGzI,aAClBG,EAAesI,EAAGtI,aAClBD,EAAeuI,EAAGvI,aAClB+I,EAAWtJ,EAAYM,GAAgBN,EAAYK,EACnDkJ,EAAWtJ,EAAYO,GAAgBP,EAAYM,EAGnDiJ,EAFSxJ,EAAYM,EAAeV,EAAiB+H,YAAcjS,KAAK8O,cAAcnE,cAAgB,EAGtGoJ,EAFSxJ,EAAYO,EAAeZ,EAAiBiI,aAAenS,KAAK8O,cAAcjE,cAAgB,EAIvGyI,EAAKT,EAAyBtQ,KAAKvC,KAAM8T,EAAWC,EAAW1J,EAAOrK,KAAK8R,OAAQ7G,GAAiBC,GACpGlG,EAAIsO,EAAGtO,EACPC,EAAIqO,EAAGrO,EAEX,MAAO,CACLoF,MAAOA,EACPC,UAAWsJ,EAAW5O,EAAIsF,EAC1BC,UAAWsJ,EAAW5O,EAAIsF,IAI9B,SAASkJ,GAAuBnJ,EAAWC,GAC3BvK,KAAK8O,cAAcnD,IAAIU,UAErCrM,KAAK8O,cAAcxE,UAAYA,EAC/BtK,KAAK8O,cAAcvE,UAAYA,EAC/BvK,KAAKsR,uBAGP,SAAS0C,GAAoBtR,EAAO6I,EAAM0I,EAAgBC,EAAWC,GACnE,IAAIpF,EAAK/O,KAAK8O,cACVzE,EAAQ0E,EAAG1E,MACX6G,EAAKnC,EAAGvE,QACRQ,EAAWkG,EAAGlG,SACdD,EAAWmG,EAAGnG,SACdqI,EAAKrE,EAAG5B,aACRC,EAAOgG,EAAGhG,KACV3C,EAAW2I,EAAG3I,SACdP,EAAmB6E,EAAG7E,iBACtBkK,EAAc,KAElB,GAAID,EAAe,CAGjBC,EAAc/J,GAASkB,EAAOA,GAFQ,KAApB3J,OAAOyS,aAE2B3R,GAAS2H,GAD5C3H,EAAQ,EAAI,GAAK,SAE7B,CACL,IAAI4R,EAAuB,EAAI1S,OAAOyS,WAAanK,EAAiB+H,YAGpEmC,EAAc/J,EAAQkB,EAAO7I,IAAU2H,EAAQA,EAF7B7G,KAAK+Q,IAAI,GAAK/Q,KAAKgR,IAAI,IAAMF,KAC9B,IAInB,GAAIJ,EAAW,OAAOE,EACtB,IAAIK,GAAiBR,IAA0BxJ,EAE/C,OADe8G,EAAgBlE,EAAY+G,EAAa,GAAIrJ,EAAUC,EAAUoC,EAAMqH,GAIxF,SAASC,GAAsB5B,EAAU5H,GACvC,IAAI6D,EAAK/O,KAAK8O,cAIVoC,EA/LN,SAA4BhH,EAAkBC,EAAkB2I,GAC9D,IAAI6B,EAAezK,EAAiB+H,YAChC2C,EAAgB1K,EAAiBiI,aAGjC0C,EAFe1K,EAAiB8H,YAECa,EACjCgC,EAFgB3K,EAAiBgI,aAEEW,EAGvC,MAAO,CACL6B,aAAcA,EACdC,cAAeA,EACfC,gBAAiBA,EACjBE,aANiBJ,EAAeE,EAOhCC,iBAAkBA,EAClBE,cAPkBJ,EAAgBE,GAuL3BG,CAHclG,EAAG7E,iBACH6E,EAAG5E,iBAEsC2I,GAC5D6B,EAAezD,EAAGyD,aAClBC,EAAgB1D,EAAG0D,cAMnB9C,EAvesB,SAA+B6C,EAAcE,EAAiBK,EAAWN,EAAeE,EAAkBK,EAAYjK,GAChJ,IAAIkK,EAAmBT,EAAeE,EAAkBK,GAAahK,EAAiB,EAAI,IAAO,EAC7FmK,EAAoBT,EAAgBE,EAAmBK,GAAcjK,EAAiB,EAAI,IAAO,EAKrG,MAAO,CACLP,aALiBgK,EAAeE,EAAkBO,EAMlDxK,aALiBwK,EAMjBvK,aALiB+J,EAAgBE,EAAmBO,EAMpDvK,aALiBuK,GAieNC,CAAsBX,EALbzD,EAAG2D,gBACN3D,EAAG6D,aAI0DH,EAHzD1D,EAAG4D,iBACN5D,EAAG8D,cAEyG9J,GAGhI,OADAlL,KAAK8R,OAASA,EACPA,EAOT,SAASyD,GAAgBvR,GACvB,IAAI+K,EAAK/O,KAAK8O,cACVzE,EAAQ0E,EAAG1E,MACXF,EAAmB4E,EAAG5E,iBACtBc,EAAgB8D,EAAGvE,QAAQS,cAC3BiG,EAAKnC,EAAG5B,aACRC,EAAO8D,EAAG9D,KACV3C,EAAWyG,EAAGzG,SACd2I,EAAKrE,EAAGzD,MACRC,EAAO6H,EAAG7H,KACVG,EAAgB0H,EAAG1H,cACvB1H,EAAMgC,iBACNhC,EAAMwR,kBACN,IAAI9S,EAhPN,SAAkBsB,EAAOyR,GACvB,IAAItQ,EAASnB,EAAQA,EAAMmB,OAAS,EAAI,GAAK,EAAI,EAEjD,OADYuI,EAAc+H,EAAatQ,GA8O3BuQ,CAAS1R,EAAO,MACxB8O,EAAWkB,GAAoBzR,KAAKvC,KAAM0C,EAAO6I,GAAOvH,EAAM2R,SAElE,GAAItL,IAAUyI,EAAd,CACA,IAAIhB,EAAS4C,GAAsBnS,KAAKvC,KAAM8S,GAAWpH,GAErD4H,EAAKlB,EAAmBpO,EAAOmG,EAAkBE,GACjDkI,EAASe,EAAGf,OACZE,EAASa,EAAGb,OAEZmD,EAAoB3K,IAAkBR,GAAqB,IAAT2C,GAAc1B,GAEhEmK,EAAKhD,EAAyBtQ,KAAKvC,KAAMuS,EAAQE,EAAQK,EAAUhB,EAAQ8D,GAC3E5Q,EAAI6Q,EAAG7Q,EACPC,EAAI4Q,EAAG5Q,EAEXjF,KAAK8R,OAASA,EACd9R,KAAK8O,cAAc1E,cAAgBC,EACnCrK,KAAK8O,cAAczE,MAAQyI,EAC3B9S,KAAK8O,cAAcxE,UAAYtF,EAC/BhF,KAAK8O,cAAcvE,UAAYtF,EAC/BjF,KAAKsR,uBAOP,SAASwE,GAAkBC,EAAY1L,EAAOkI,EAAQE,EAAQzO,GAC5D,IAAI+K,EAAK/O,KAAK8O,cACV3E,EAAmB4E,EAAG5E,iBACtB+G,EAAKnC,EAAGvE,QACRC,EAAWyG,EAAGzG,SACdM,EAAWmG,EAAGnG,SACdC,EAAWkG,EAAGlG,SACdC,EAAgBiG,EAAGjG,cACnBC,EAAiBgG,EAAGhG,eACxB,IAAIT,IAAYsL,EAAhB,CACA,IAAIjD,EAAWvB,EAAgBlE,EAAYhD,EAAO,GAAIU,EAAUC,EAAU,KAAM,MAC5E8G,EAAS4C,GAAsBnS,KAAKvC,KAAM8S,EAAU5H,GACpD4I,EAAYvB,EACZwB,EAAYtB,EAEhB,GAAIzO,EAAO,CACT,IAAIgS,EAAgB5D,EAAmBpO,EAAOmG,EAAkBE,GAChEyJ,EAAYkC,EAAczD,OAC1BwB,EAAYiC,EAAcvD,OAG5B,IAAIW,EAAKP,EAAyBtQ,KAAKvC,KAAM8T,EAAWC,EAAWjB,EAAUhB,EAAQ7G,GAIrF,MAAO,CACLZ,MAAOyI,EACPxI,UALM8I,EAAGpO,EAMTuF,UALM6I,EAAGnO,IASb,SAASgR,KACP,IAAIlH,EAAK/O,KAAK8O,cACVzE,EAAQ0E,EAAG1E,MACXH,EAAmB6E,EAAG7E,iBACtBgH,EAAKnC,EAAGvE,QACRO,EAAWmG,EAAGnG,SACdE,EAAgBiG,EAAGjG,cACnBmI,EAAKrE,EAAG5B,aACR1C,EAAW2I,EAAG3I,SACdqC,EAAgBsG,EAAGtG,cACnBD,EAAgBuG,EAAGvG,cACnBkJ,EAAatL,GAAYJ,GAASU,EAOtC,IALIV,GAAS,GAAKY,IAEhByI,GAAuBnR,KAAKvC,OAG1B+V,EAAJ,CACA,IAAIxD,EAASrI,EAAiB+H,YAAc,EACxCQ,EAASvI,EAAiBiI,aAAe,EACzCnB,EAAc8E,GAAkBvT,KAAKvC,MAAM,EAAO+K,EAAUwH,EAAQE,EAAQ,MAChF1B,EAAiBxO,KAAKvC,KAAM,CAC1BgR,YAAaA,EACbC,MAAOnE,EACPxF,KAAMuF,KAQV,SAASqJ,GAAkBlS,GACzBA,EAAMgC,iBACNhC,EAAMwR,kBACN,IAAIzG,EAAK/O,KAAK8O,cACV3E,EAAmB4E,EAAG5E,iBACtBE,EAAQ0E,EAAG1E,MACX6G,EAAKnC,EAAG/B,YACRvC,EAAWyG,EAAGzG,SACdwC,EAAOiE,EAAGjE,KACV1B,EAAO2F,EAAG3F,KACVuB,EAAgBoE,EAAGpE,cACnBD,EAAgBqE,EAAGrE,cAEvB,GAAa,UAATI,EACF,OAAOkJ,GAAqB5T,KAAKvC,KAAMgE,EAAO8I,GAGhD,IAAIpK,EAAiB,YAATuK,GAAsB,EAAI,EAClC6F,EAAWkB,GAAoBzR,KAAKvC,KAAM0C,EAAO6I,OAAMrI,OAAWA,GAAW,GAE7EkQ,EAAKhB,EAAmBpO,EAAOmG,EAAkBE,GACjDkI,EAASa,EAAGb,OACZE,EAASW,EAAGX,OAEZzB,EAAc8E,GAAkBvT,KAAKvC,KAAMyK,EAAUqI,EAAUP,EAAQE,GAC3E,GAAIzB,EAAY3G,QAAUA,EAA1B,CACA,IACI9E,EAAO6Q,GADOpC,GAAoBzR,KAAKvC,KAAM0C,EAAO6I,GAAM,OAAMrI,GAAW,GAChC4P,EAAUhG,GACzDiE,EAAiBxO,KAAKvC,KAAM,CAC1BgR,YAAaA,EACbC,MAAO1L,EACP+B,KAAMuF,KAIV,SAASwJ,GAAmBZ,EAAaa,GACvC,IAAIvH,EAAK/O,KAAK8O,cACVzE,EAAQ0E,EAAG1E,MACXC,EAAYyE,EAAGzE,UACfC,EAAYwE,EAAGxE,UACfL,EAAmB6E,EAAG7E,iBACtByC,EAASoC,EAAGpC,OACZI,EAAUgC,EAAGhC,QAGbwF,GAFerI,EAAiB+H,YAEP,EAAI3H,GAAaD,EAC1CoI,GAFgBvI,EAAiBiI,aAEP,EAAI5H,GAAaF,EAC3CyI,EAAWkB,GAAoBzR,KAAKvC,KAAMyV,EAAaa,OAAYpT,OAAWA,GAAW,GACzFqT,EAAWzD,EAAWzI,EACtBmM,EAAiBD,EAAW5J,EAAOG,cAAgBC,EAAQD,cAC3DD,EAAgB0J,EAAW5J,EAAOE,cAAgBE,EAAQF,cAC1DkJ,EAAaQ,EAAW5J,EAAOlC,SAAWsC,EAAQtC,SAClDuG,EAAc8E,GAAkBvT,KAAKvC,KAAM+V,EAAYjD,EAAUP,EAAQE,GAC7E,GAAIzB,EAAY3G,QAAUA,EAA1B,CACA,IACI9E,EAAO6Q,GADOpC,GAAoBzR,KAAKvC,KAAMyV,EAAaa,GAAY,OAAMpT,GAAW,GAC5C4P,EAAU0D,GACzDzF,EAAiBxO,KAAKvC,KAAM,CAC1BgR,YAAaA,EACbC,MAAO1L,EACP+B,KAAMuF,KAIV,SAASsJ,GAAqBK,GAC5B,IAAIzH,EAAK/O,KAAKmE,MAAMsS,cAChBC,EAAe3H,EAAG2H,aAClBC,EAAmB5H,EAAG4H,iBACtBC,EAAmB7H,EAAG6H,iBACtB1F,EAAKlR,KAAK8O,cACVzE,EAAQ6G,EAAG7G,MACXC,EAAY4G,EAAG5G,UACfC,EAAY2G,EAAG3G,UACf2C,EAAQgE,EAAGhE,MACXkG,EAAKlC,EAAG1G,QACRC,EAAW2I,EAAG3I,SACdQ,EAAgBmI,EAAGnI,cACnBE,EAAgBiI,EAAGjI,cACnBD,EAAiBkI,EAAGlI,eACxB,KAAIT,GAAYyC,EAAMzC,UAClBJ,IAAUqM,GAAgBpM,IAAcqM,GAAoBpM,IAAcqM,GAA9E,CACA,IAAI3F,EAAkC,iBAAnBuF,EAA8BA,EAAiBtJ,EAAMJ,cACpEsH,EAAc1G,EAAcgJ,EAAc,EAAarM,OACvD2I,EAAetF,EAAciJ,EAAkB,EAAarM,WAC5D2I,EAAevF,EAAckJ,EAAkB,EAAarM,WAEhE,GAAIU,IAAkBC,GAAkBC,EAAe,CACrD,IAAI2G,EAAS4C,GAAsBnS,KAAKvC,KAAMoU,EAAalJ,GAC3D8H,EAAelB,EAAOnH,aACtBsI,EAAenB,EAAOjH,aAGxB,IAAImG,EAAc,CAChB3G,MAAO+J,EACP9J,UAAW0I,EACXzI,UAAW0I,GAEblC,EAAiBxO,KAAKvC,KAAM,CAC1BgR,YAAaA,EACbC,MAAOA,EACP3J,KAAM4F,EAAML,iBAIhB,SAASuJ,GAAuBhC,EAAatB,EAAUvN,GACrD,OAAOA,GAAQuN,EAAWsB,GAG5B,SAASyC,GAAMC,EAAQvJ,GACrB,IAAIF,EAAc7J,KAAK4K,IAAI,GAAIb,GAC/B,OAAO/J,KAAKqT,MAAMC,EAASzJ,GAAeA,EAO5C,SAAS0J,GAAgBD,GACvB,OAAOA,IAAWE,KAAYF,KAAYE,IAG5C,SAASC,GAAmBC,EAAiBC,GAC3C,IAAIpI,EAAK/O,KAAK8O,cACVoC,EAAKnC,EAAGvE,QACRO,EAAWmG,EAAGnG,SACdC,EAAWkG,EAAGlG,SACdoI,EAAKrE,EAAG5B,aACRC,EAAOgG,EAAGhG,KACV3C,EAAW2I,EAAG3I,SAClB,GAAkC,iBAAvB0M,GAA8D,iBAApBD,EAA8B,OAAOvE,QAAQC,MAAM,2CACxG,KAAIsE,EAAkB,GAAtB,CACA,IACInE,EADkBmE,EAAkBC,EACAnX,KAAKoX,gBAC7C,OAAO7F,EAAgBlE,EAAY0F,EAAiB,GAAIhI,EAAUC,EAAUoC,GAAO3C,IAgBrF,SAAS4M,GAAgBrT,GACvB,IAAI+K,EAAK/O,KAAK8O,cACVzE,EAAQ0E,EAAG1E,MACX6G,EAAKnC,EAAGvE,QACRS,EAAgBiG,EAAGjG,cACnBC,EAAiBgG,EAAGhG,eACpBkI,EAAKrE,EAAG5B,aACR1C,EAAW2I,EAAG3I,SACd2C,EAAOgG,EAAGhG,KACV1B,EAAgBqD,EAAGzD,MAAMI,cACzBgB,EAAQqC,EAAGrC,MACXvC,EAAmBnK,KAAKkE,MAAMiG,iBAClC,IAAIuC,EAAMjC,WAAYzK,KAAK8O,cAActE,QAAQC,WAE7CzG,EAAM+B,aACR/B,EAAMgC,iBACNhC,EAAMwR,mBAIwB,OAA5BxV,KAAKmX,oBAAT,CAEA,IAAI7D,EAnCN,SAA2BtP,EAAOqG,EAAOF,GACvC,IAAIkI,EAAclI,EAAiBmI,wBAC/BrO,EAAUD,EAAMC,QAChBqT,EAAcT,GAAM5S,EAAQ,GAAGO,QAAU6N,EAAYG,KAAM,GAC3D+E,EAAcV,GAAM5S,EAAQ,GAAGQ,QAAU4N,EAAYK,IAAK,GAG9D,MAAO,CACLH,QAAS+E,EAHQT,GAAM5S,EAAQ,GAAGO,QAAU6N,EAAYG,KAAM,IAGvB,EAAInI,EAC3CoI,QAAS8E,EAHQV,GAAM5S,EAAQ,GAAGQ,QAAU4N,EAAYK,IAAK,IAGtB,EAAIrI,GA0BpCmN,CAAkBxT,EAAOqG,EAAOF,GACrCoI,EAASe,EAAGf,OACZE,EAASa,EAAGb,OAGhB,IAAIsE,GAAgBxE,KAAWwE,GAAgBtE,GAA/C,CACA,IAAIyE,EAhEN,SAA4BlT,GAC1B,OAAOiK,EAAYjK,EAAMC,QAAQ,GAAID,EAAMC,QAAQ,IA+D7BwT,CAAmBzT,GACrC8O,EAAWmE,GAAmB1U,KAAKvC,KAAMkX,EAAiBlX,KAAKmX,oBACnE,IAAIJ,GAAgBjE,IAAaA,IAAazI,EAA9C,CAEA,IAAIyH,EAAS4C,GAAsBnS,KAAKvC,KAAM8S,EAAU5H,GAEpD0K,EAAoB3K,IAAkBR,GAAqB,IAAT2C,GAAc1B,GAEhEmK,EAAKhD,EAAyBtQ,KAAKvC,KAAMuS,EAAQE,EAAQK,EAAUhB,EAAQ8D,GAC3E5Q,EAAI6Q,EAAG7Q,EACPC,EAAI4Q,EAAG5Q,EAEXjF,KAAK0X,aAAeR,EACpBlX,KAAK8O,cAAcxE,UAAYtF,EAC/BhF,KAAK8O,cAAcvE,UAAYtF,EAC/BjF,KAAK8O,cAAczE,MAAQyI,EAC3B9S,KAAK8O,cAAc1E,cAAgBC,EAEnCrK,KAAKsR,yBAKP,SAASqG,GAAkB1G,EAAOnE,GAGhC,OAF0B9M,KAAK8O,cAAcnD,IAAII,oBAGxCe,EAAgBA,EAAgBtJ,KAAK+Q,IAAI,EAAGtD,GAG9CnE,EAGT,SAAS8K,KACP5X,KAAK6X,SAAS,CACZC,gBAAgB,IAIpB,SAASC,KACP/X,KAAK6X,SAAS,CACZC,gBAAgB,IAIpB,SAASE,KACP,IAAIzP,EAAQvI,KAER+O,EAAK/O,KAAK8O,cACVxE,EAAYyE,EAAGzE,UACfC,EAAYwE,EAAGxE,UACfU,EAAgB8D,EAAGvE,QAAQS,cAC3BiG,EAAKnC,EAAGpD,IACRQ,EAAmB+E,EAAG/E,iBACtBN,EAAYqF,EAAGrF,UACfC,EAAYoF,EAAGpF,UACfM,EAAwB8E,EAAG9E,sBAC3BG,EAAyB2E,EAAG3E,uBAC5BC,EAAyB0E,EAAG1E,uBAC5BH,EAAU6E,EAAG7E,QACbC,EAAc4E,EAAG5E,YACjBpC,EAAmB6E,EAAG7E,iBAC1B,GAAKlK,KAAKsQ,QAAV,CACA,IAAKtQ,KAAKwF,WAAaxF,KAAK8R,OAAQ,OAAOzB,EAAuB9N,KAAKvC,MACvE,IAAIoT,EAAKpT,KAAK8R,OACVlH,EAAewI,EAAGxI,aAClBD,EAAeyI,EAAGzI,aAClBG,EAAesI,EAAGtI,aAClBD,EAAeuI,EAAGvI,aAClByI,EAAKtT,KAAKwF,SACVyS,EAAY3E,EAAG2E,UACfC,EAAY5E,EAAG4E,UACf1S,EAAW8N,EAAG9N,SACdsH,EAAgB6K,GAAkBpV,KAAKvC,KAAMwF,EAAU2G,GAE3D,GAAKW,EAAL,CAKA,IAAIqL,EAAUF,EACVG,EAAUF,EAEVG,EAAmBvL,EAAgBP,EAAyBO,EAAgBP,EAC5EwF,EAAe1F,EAAUC,EAAc,EACvC0F,EAAW9H,EAAmB6H,EAAe7H,EAAiB+H,YAAc,IAAM,EAClFC,EAAWhI,EAAmB6H,EAAe7H,EAAiBiI,aAAe,IAAM,EACnFmG,EAAa1N,EAAeoH,EAC5BuG,EAAa5N,EAAeqH,EAC5BwG,EAAa1N,EAAeoH,EAC5BuG,EAAa5N,EAAeqH,EAC5BwG,EAAgB7G,EAAoBvH,EAAWC,EAAWvK,KAAK8R,OAAQ7G,EAAe8G,EAAc7H,GACpGwG,GAAY,IAAIC,MAAOC,UAE3BJ,EAAQjO,KAAKvC,KAAMoM,EAAuBiM,GAAkB,SAAU9M,GACpE,IAAIsF,GAAY,IAAIF,MAAOC,UAAYF,EAGnCiI,GAAmBC,EADDtJ,EAAoB9C,IADlBqE,EAAYtE,IAGhCsE,EAAYtE,GAA0BoM,EAAmB,GAAKA,IAAqB3B,KAAY2B,KAAsB3B,OAAU2B,EAAmB,GACtJ,IAAIE,EAAmBC,GAAYjN,EAAWsM,EAAS5M,EAAMoN,EAAkBhO,EAAcC,EAAcK,EAAeX,EAAWoO,EAAc1T,EAAGuT,EAAYD,GAC9JS,EAAmBD,GAAYhN,EAAWsM,EAAS7M,EAAMoN,EAAkB9N,EAAcC,EAAcG,EAAeV,EAAWmO,EAAczT,EAAGwT,EAAYD,GAE9JlO,IAAcuO,GAAoBtO,IAAcwO,IAElDxQ,EAAMuG,cAAcxE,UAAYuO,EAChCtQ,EAAMuG,cAAcvE,UAAYwO,EAEhCxQ,EAAM+I,+BAhCRoC,GAAuBnR,KAAKvC,OAqChC,SAASgZ,GAAuBhV,GAC9B,IAAIuE,EAAQvI,KAER+O,EAAK/O,KAAK8O,cACVzE,EAAQ0E,EAAG1E,MACXI,EAAWsE,EAAGvE,QAAQC,SACtByG,EAAKnC,EAAGpD,IACRnG,EAAW0L,EAAG1L,SACdwG,EAAsBkF,EAAGlF,oBACzBC,EAAsBiF,EAAGjF,oBACzBC,EAAmBgF,EAAGhF,iBACtBhC,EAAmB6E,EAAG7E,iBAC1B,MAAK1E,GAAYyG,GAAuB5B,GAASI,GAAjD,CACAmN,GAAqBrV,KAAKvC,MAC1B,IAAIiZ,EAAMtI,KAAKsI,MAEf,GAAIjZ,KAAKkZ,kBAAmB,CAC1B,IAAIC,EAAajG,EAAkBlP,GACnC,IAAKmV,EAAY,OAAOxG,QAAQC,MAAM,uCACtC,IAAIpO,EAAU2U,EAAW3U,QACrBC,EAAU0U,EAAW1U,QACrB2U,EAAY5U,EAAUxE,KAAKkZ,kBAAkB1U,QAC7C6U,EAAY5U,EAAUzE,KAAKkZ,kBAAkBzU,QAC7C6U,EAAWL,EAAMjZ,KAAKuZ,aACtBC,EAAwB,EAAItP,EAAiB+H,YAAcrQ,OAAOyS,WAClEoF,EAAwB,EAAIvP,EAAiBiI,aAAevQ,OAAO8X,YAGnEzB,EAAYmB,EAAYE,EAAWtN,EAAsB3B,GAF/C,GAAK7G,KAAK+Q,IAAIrI,EAAkB1I,KAAKgR,IAAI,EAAGgF,KAGtDtB,EAAYmB,EAAYC,EAAWtN,EAAsB3B,GAF/C,GAAK7G,KAAK+Q,IAAIrI,EAAkB1I,KAAKgR,IAAI,EAAGiF,KAGtDxI,EAAQmI,EAAYA,EAAYC,EAAYA,EAC5CM,EAAanW,KAAKiC,KAAKwL,GAASqI,EAAWtN,EAC/C,GAAIhM,KAAKwF,UAAYmU,EAAa3Z,KAAKwF,SAASA,UAAYxF,KAAK4Z,SAAU,OAC3E5Z,KAAKwF,SAAW,CACdyS,UAAWA,EACXC,UAAWA,EACX1S,SAAUmU,GAGR3Z,KAAK4Z,UAAUC,aAAa7Z,KAAK4Z,UACrC5Z,KAAK4Z,SAAWE,YAAW,WACrBvR,EAAM+H,UAAS/H,EAAMqR,UAAW,KArIvB,IAyIjB,IAAIG,EAAW7G,EAAkBlP,GACjChE,KAAKkZ,kBAAoBa,EACzB/Z,KAAKuZ,aAAeN,GAGtB,SAASH,GAAYkB,EAAU9X,EAAQqJ,EAAM0O,EAAenM,EAAUC,EAAU9C,EAAeiP,EAAQxB,EAAeyB,EAAWC,GAC/H,GAAInP,EAAe,CAEf,IAOIoP,EARN,GAAI3B,EAAgB5K,GAAYoM,EAASnM,EAEvC,OADIsM,EAAc3B,GAAiBA,EAAgB3K,GAAYkM,GAC7CG,EAAkBA,EAChCC,EAActM,EAAiBA,EAC5BsM,EAGT,GAAI3B,EAAgB5K,GAAYoM,EAASpM,EAEvC,OADIuM,EAAc3B,GAAiBA,EAAgB5K,GAAYmM,GAC7CE,EAAkBA,EAChCE,EAAcvM,EAAiBA,EAC5BuM,EAIX,OAAIL,EAAiBtB,EAEd9K,EADcsM,EAAShY,EAASqJ,EACHuC,EAAUC,EAAU9C,GAQ1D,IAAIqP,GAAY,CAAC,gBAAiB,QAAS,YAAa,YAAa,mBAAoB,mBAAoB,eAAgB,eAAgB,UAAW,cAAe,iBAAkB,YAAa,gBAAiB,kBAAmB,aAAc,iBAAkB,eAAgB,UAAW,QAAS,eAAgB,MAAO,QAAS,SAAU,UAAW,cAAe,SAE9WC,GAA0B,SAAiCpW,GAC7D,OAAOnC,OAAOyM,KAAKtK,GAAOgL,QAAO,SAAUC,EAAKzN,GAK9C,OAJI2Y,GAAUE,SAAS7Y,KACrByN,EAAIzN,GAAOwC,EAAMxC,IAGZyN,IACN,KAGDqL,GAAU,IAAMC,cAAc,IAC9BC,GAAsB,KAEtBC,GAAsB,KAGtB,GAEJ,SAAUC,GAGR,SAASC,IACP,IAAIvS,EAAmB,OAAXsS,GAAmBA,EAAO9a,MAAMC,KAAMC,YAAcD,KAqgBhE,OAngBAuI,EAAM+H,SAAU,EAChB/H,EAAMrE,MAAQ,CACZgG,sBAAkBhH,EAClBiH,sBAAkBjH,GAEpBqF,EAAMuG,cAAgBhF,EAAQA,EAAQA,EAAQA,EAAQ,GAAI,GAAemF,EAAW,EAAc1G,EAAMpE,MAAM4W,gBAAiBxS,EAAMpE,MAAMsS,eAAgB,CACzJrM,cAAe7B,EAAMpE,MAAM4W,cAAc1Q,OAAS9B,EAAMpE,MAAMsS,cAAcpM,OAAS,EAAaA,QAEpG9B,EAAMyS,sBAAwB,EAC9BzS,EAAM0S,sBAAwB,EAE9B1S,EAAM8K,YAAc,KACpB9K,EAAM2S,QAAS,EAEf3S,EAAM4O,mBAAqB,KAC3B5O,EAAMmP,aAAe,KACrBnP,EAAM6O,gBAAkB,KACxB7O,EAAM4S,SAAW,KACjB5S,EAAMuJ,OAAS,KAEfvJ,EAAMgR,aAAe,KACrBhR,EAAM2Q,kBAAoB,KAC1B3Q,EAAM/C,SAAW,KACjB+C,EAAM6S,QAAU,KAChB7S,EAAM8S,QAAU,KAChB9S,EAAMqR,UAAW,EAEjBrR,EAAM+S,mBAAqB,KAC3B/S,EAAMgT,UAAY,KAElBhT,EAAMiI,QAAU,KAChBjI,EAAMqE,UAAY,KAClBrE,EAAMiT,UAAY,KAIlBjT,EAAMkT,YAAc,SAAUzX,GAC5B,IAAI+K,EAAKxG,EAAMuG,cACXzE,EAAQ0E,EAAG1E,MACX6G,EAAKnC,EAAGzD,MACRb,EAAWyG,EAAGzG,SACde,EAAe0F,EAAG1F,aAClBC,EAAkByF,EAAGzF,gBACrB2H,EAAK7K,EAAMpE,MACXuX,EAAetI,EAAGsI,aAClBC,EAAUvI,EAAGuI,QACbC,EAAcxI,EAAGwI,YACjBtI,EAAK/K,EAAMrE,MACXgG,EAAmBoJ,EAAGpJ,iBACtBC,EAAmBmJ,EAAGnJ,iBACtB5B,EAAM2S,QAAUzQ,GAAYlC,EAAMuG,cAActE,QAAQC,WAAaP,IAAqBC,IAEzFqB,GAAiBxH,EAAM2R,YACvBlK,GAAmBzH,EAAM2R,UAEzBgF,KACHpS,EAAMgT,UAAYlR,EAClBgG,EAAuB9N,KAAKgG,GAC5BmG,EAAegN,EAAcnT,EAAMsT,qBAIrCtG,GAAgBhT,KAAKgG,EAAOvE,GAC5B0K,EAAeiN,EAASpT,EAAMsT,oBAE9BtT,EAAM+I,oBAAoB,KAAM,KAAM,MAEtC/I,EAAM+S,mBAAqBtX,EAEvB4K,EAAgBrG,EAAM+S,mBAAoBtX,EAAOuE,EAAMuG,iBACzD+K,aAAac,IACbA,GAAsBb,YAAW,WAC1BvR,EAAM+H,UACX5B,EAAekN,EAAarT,EAAMsT,oBAClClB,GAAsB,QAtFP,MA2FnBpS,EAAMiI,SAAU,EAEhBjI,EAAMgT,UAAYhT,EAAMuG,cAAczE,MACtCwP,aAAae,IACbA,GAAsBd,YAAW,WAC1BvR,EAAM+H,SACX2F,GAAyB1T,KAAKgG,EAAOvE,KA/FpB,QAsGrBuE,EAAMuT,mBAAqB,SAAU9X,GACnC,IAAIyI,EAAkBlE,EAAMuG,cAAcnD,IAAIc,gBAC9C,OAAOA,EAAgBsP,KAAI,SAAUC,GACnC,OAAOA,EAAIC,iBACVzB,SAASxW,EAAM9B,OAAOga,UAAYzP,EAAgB0P,MAAK,SAAUC,GAClE,OAAOpY,EAAM9B,OAAOma,UAAUxO,MAAM2M,SAAS4B,OAIjD7T,EAAM+T,qBAAuB,SAAUtY,GACrC,IAAIyG,EAAWlC,EAAMuG,cAAcnD,IAAIlB,SACnCsE,EAAKxG,EAAMrE,MACXgG,EAAmB6E,EAAG7E,iBACtBC,EAAmB4E,EAAG5E,iBAC1B,OAAQ5B,EAAM2S,QAAUzQ,GAAYlC,EAAMuG,cAActE,QAAQC,UAAYzG,EAAMC,UAAqC,IAAzBD,EAAMC,QAAQ7B,QAAgBoB,KAAK6B,IAAIkD,EAAM8K,YAAYrO,EAAIhB,EAAMC,QAAQ,GAAGO,SAAW,GAAKhB,KAAK6B,IAAIkD,EAAM8K,YAAYpO,EAAIjB,EAAMC,QAAQ,GAAGQ,SAAW,KAAOyF,IAAqBC,GAGrR5B,EAAMgU,mBAAqB,SAAUvX,EAAGC,GACtC,IAAI8J,EAAKxG,EAAMuG,cACXxE,EAAYyE,EAAGzE,UACfC,EAAYwE,EAAGxE,UACnBhC,EAAM2S,QAAS,EACf3S,EAAM8K,YAAc,CAClBrO,EAAGA,EAAIsF,EACPrF,EAAGA,EAAIsF,GAETmE,EAAenG,EAAMpE,MAAMqY,eAAgBjU,EAAMsT,qBAGnDtT,EAAMkU,mBAAqB,SAAUzY,GACnC,IAAI+K,EAAKxG,EAAMuG,cACX5E,EAAmB6E,EAAG7E,iBACtBG,EAAQ0E,EAAG1E,MACX6G,EAAKnC,EAAGvE,QACRO,EAAWmG,EAAGnG,SACdC,EAAWkG,EAAGlG,SACdE,EAAiBgG,EAAGhG,eACpBT,EAAWsE,EAAGpD,IAAIlB,SAClBvI,EAAS8B,EAAM9B,OACf+B,EAAUD,EAAMC,QAChBwG,GAAYlC,EAAMuG,cAActE,QAAQC,UAAYP,IAAqBA,EAAiBwS,SAASxa,IAAWqG,EAAMuT,mBAAmB9X,IAAUqG,EAAQU,GAAYV,EAAQW,IACjLqF,EAAuB9N,KAAKgG,GAC5BA,EAAMuJ,OAAS4C,GAAsBnS,KAAKgG,EAAO8B,EAAOa,GAEpDjH,GAA8B,IAAnBA,EAAQ7B,QACrBmG,EAAMgU,mBAAmBtY,EAAQ,GAAGO,QAASP,EAAQ,GAAGQ,SAIrDR,GACHsE,EAAMgU,mBAAmBvY,EAAMQ,QAASR,EAAMS,WAIlD8D,EAAM4K,cAAgB,SAAUnP,GAC1BuE,EAAM2S,QAAQlX,EAAMgC,iBACpBuC,EAAM+T,qBAAqBtY,KAC/BA,EAAMwR,kBACNwD,GAAuBzW,KAAKgG,EAAOvE,GACnCmP,GAAc5Q,KAAKgG,EAAOvE,GAC1B0K,EAAenG,EAAMpE,MAAMwY,UAAWpU,EAAMsT,sBAG9CtT,EAAMqU,kBAAoB,WACxB,GAAIrU,EAAM2S,OAAQ,CAChB3S,EAAM2S,QAAS,EACf3S,EAAMiI,SAAU,EAChBjI,EAAMqE,WAAY,EAClBmL,GAAmBxV,KAAKgG,GACxBmG,EAAenG,EAAMpE,MAAM0Y,cAAetU,EAAMsT,oBAChD,IAAI9M,EAAKxG,EAAMuG,cACXtJ,EAAWuJ,EAAGpD,IAAInG,SAClB6E,EAAQ0E,EAAG1E,MAEX9B,EAAM/C,UAAYA,GAAY6E,EAAQ,EACxC2N,GAAgBzV,KAAKgG,GAGrBmL,GAAuBnR,KAAKgG,KAQlCA,EAAMuU,iBAAmB,SAAU9Y,GACjC,IAAIqG,EAAQ9B,EAAMuG,cAAczE,MAChCrG,EAAMgC,iBACNhC,EAAMwR,kBACNnF,EAAuB9N,KAAKgG,GAC5B,IAAI4S,EAAWlN,EAAYjK,EAAMC,QAAQ,GAAID,EAAMC,QAAQ,IAC3DsE,EAAM4O,mBAAqBgE,EAC3B5S,EAAMmP,aAAeyD,EACrB5S,EAAM6O,gBAAkB/M,EACxB9B,EAAM2S,QAAS,EACfxM,EAAenG,EAAMpE,MAAM4Y,gBAAiBxU,EAAMsT,qBAGpDtT,EAAMyU,YAAc,SAAUhZ,GAC5BuE,EAAM2S,QAAS,EACf7D,GAAgB9U,KAAKgG,EAAOvE,GAC5B0K,EAAenG,EAAMpE,MAAM8Y,WAAY1U,EAAMsT,qBAG/CtT,EAAM2U,gBAAkB,WACe,iBAA1B3U,EAAM6O,kBACf7O,EAAM2S,QAAS,EACf3S,EAAM/C,SAAW,KACjB+C,EAAMmP,aAAe,KACrBnP,EAAM6O,gBAAkB,KACxB7O,EAAM4O,mBAAqB,KAC3BlB,GAAyB1T,KAAKgG,GAC9BmG,EAAenG,EAAMpE,MAAMgZ,eAAgB5U,EAAMsT,sBAOrDtT,EAAM6U,iBAAmB,SAAUpZ,GACjC,IAAI+K,EAAKxG,EAAMuG,cACX5E,EAAmB6E,EAAG7E,iBACtBC,EAAmB4E,EAAG5E,iBACtBE,EAAQ0E,EAAG1E,MACX6G,EAAKnC,EAAGvE,QACRC,EAAWyG,EAAGzG,SACdM,EAAWmG,EAAGnG,SACd9G,EAAUD,EAAMC,QACpB,IAAIwG,GAAaP,GAAqBC,KAAoBE,EAAQU,GAElE,OADAsF,EAAuB9N,KAAKgG,GACxBtE,GAA8B,IAAnBA,EAAQ7B,OAAqBmG,EAAMkU,mBAAmBzY,GACjEC,GAA8B,IAAnBA,EAAQ7B,OAAqBmG,EAAMuU,iBAAiB9Y,QAAnE,GAGFuE,EAAM8U,YAAc,SAAUrZ,GAC5B,IAAI+K,EAAKxG,EAAMuG,cACXnD,EAAMoD,EAAGpD,IACTe,EAAQqC,EAAGrC,MAEf,IADcqC,EAAGvE,QACLC,SACZ,OAAKkB,EAAIlB,UAAqC,IAAzBzG,EAAMC,QAAQ7B,OAC9BsK,EAAMjC,UAAqC,IAAzBzG,EAAMC,QAAQ7B,YAArC,EAA0DmG,EAAMyU,YAAYhZ,GADpBuE,EAAM4K,cAAcnP,IAI9EuE,EAAM+U,gBAAkB,WACtB/U,EAAMqU,oBAENrU,EAAM2U,mBAMR3U,EAAMoE,OAAS,SAAU3I,GACvB,IAAI+K,EAAKxG,EAAMuG,cACXoC,EAAKnC,EAAGpC,OACRlC,EAAWyG,EAAGzG,SACdc,EAAO2F,EAAG3F,KACVf,EAAUuE,EAAGvE,QACb4I,EAAK7K,EAAMrE,MACXgG,EAAmBkJ,EAAGlJ,iBACtBC,EAAmBiJ,EAAGjJ,iBAC1B,IAAKnG,EAAO,MAAMuZ,MAAM,yCACpB9S,IAAYD,EAAQC,UAAaP,GAAqBC,GAC1DkM,GAAmB9T,KAAKgG,EAAO,EAAGgD,IAGpChD,EAAMwE,QAAU,SAAU/I,GACxB,IAAI+K,EAAKxG,EAAMuG,cACXoC,EAAKnC,EAAGhC,QACRtC,EAAWyG,EAAGzG,SACdc,EAAO2F,EAAG3F,KACVf,EAAUuE,EAAGvE,QACb4I,EAAK7K,EAAMrE,MACXgG,EAAmBkJ,EAAGlJ,iBACtBC,EAAmBiJ,EAAGjJ,iBAC1B,IAAKnG,EAAO,MAAMuZ,MAAM,0CACpB9S,IAAYD,EAAQC,UAAaP,GAAqBC,GAC1DkM,GAAmB9T,KAAKgG,GAAQ,EAAGgD,IAGrChD,EAAMiV,cAAgB,SAAUxZ,GAC9B,IAAI+K,EAAKxG,EAAMuG,cACXtE,EAAUuE,EAAGvE,QACb0G,EAAKnC,EAAG/B,YACRvC,EAAWyG,EAAGzG,SACdc,EAAO2F,EAAG3F,KACV6H,EAAK7K,EAAMrE,MACXgG,EAAmBkJ,EAAGlJ,iBACtBC,EAAmBiJ,EAAGjJ,iBAC1B,IAAKnG,EAAO,MAAMuZ,MAAM,8CACpB9S,IAAYD,EAAQC,UAAaP,GAAqBC,GAC1D+L,GAAkB3T,KAAKgG,EAAOvE,EAAO,EAAGuH,IAG1ChD,EAAMkV,SAAW,SAAU3K,EAAU7B,EAAO3J,QAC5B,IAAV2J,IACFA,EAAQ,UAGG,IAAT3J,IACFA,EAAO,WAGT,IAAIyH,EAAKxG,EAAMuG,cACXxE,EAAYyE,EAAGzE,UACfC,EAAYwE,EAAGxE,UACfF,EAAQ0E,EAAG1E,MACXI,EAAWsE,EAAGvE,QAAQC,SACtByG,EAAK3I,EAAMrE,MACXgG,EAAmBgH,EAAGhH,iBACtBC,EAAmB+G,EAAG/G,iBAC1B,IAAIM,GAAaP,GAAqBC,EAAtC,CACA,IAAI6G,EAAc,CAChB1G,UAAWA,EACXC,UAAWA,EACXF,MAAOuH,MAAMkB,GAAYzI,EAAQyI,GAEnC/B,EAAiBxO,KAAKgG,EAAO,CAC3ByI,YAAaA,EACbC,MAAOA,EACP3J,KAAMA,MAIViB,EAAMmV,aAAe,SAAUC,EAAS1M,EAAO3J,QAC/B,IAAV2J,IACFA,EAAQ,UAGG,IAAT3J,IACFA,EAAO,WAGT,IAAIyH,EAAKxG,EAAMuG,cACXxE,EAAYyE,EAAGzE,UACfC,EAAYwE,EAAGxE,UACfF,EAAQ0E,EAAG1E,MACX6G,EAAKnC,EAAGvE,QACRC,EAAWyG,EAAGzG,SACdC,EAAmBwG,EAAGxG,iBACtB0I,EAAK7K,EAAMrE,MACXgG,EAAmBkJ,EAAGlJ,iBACtBC,EAAmBiJ,EAAGjJ,iBAC1B,IAAIM,GAAaC,GAAqBR,GAAqBC,EAA3D,CACA,IAAI6G,EAAc,CAChB1G,UAAWsH,MAAM+L,GAAWrT,EAAYqT,EACxCpT,UAAWA,EACXF,MAAOA,GAET0G,EAAiBxO,KAAKgG,EAAO,CAC3ByI,YAAaA,EACbC,MAAOA,EACP3J,KAAMA,MAIViB,EAAMqV,aAAe,SAAUC,EAAS5M,EAAO3J,QAC/B,IAAV2J,IACFA,EAAQ,UAGG,IAAT3J,IACFA,EAAO,WAGT,IAAIyH,EAAKxG,EAAMuG,cACXxE,EAAYyE,EAAGzE,UACfD,EAAQ0E,EAAG1E,MACXE,EAAYwE,EAAGxE,UACf2G,EAAKnC,EAAGvE,QACRC,EAAWyG,EAAGzG,SACdC,EAAmBwG,EAAGxG,iBACtB0I,EAAK7K,EAAMrE,MACXgG,EAAmBkJ,EAAGlJ,iBACtBC,EAAmBiJ,EAAGjJ,iBAC1B,IAAIM,GAAaC,GAAqBR,GAAqBC,EAA3D,CACA,IAAI6G,EAAc,CAChB1G,UAAWA,EACXC,UAAWqH,MAAMiM,GAAWtT,EAAYsT,EACxCxT,MAAOA,GAET0G,EAAiBxO,KAAKgG,EAAO,CAC3ByI,YAAaA,EACbC,MAAOA,EACP3J,KAAMA,MAIViB,EAAMuV,aAAe,SAAUH,EAASE,EAAS/K,EAAU7B,EAAO3J,QAClD,IAAV2J,IACFA,EAAQ,UAGG,IAAT3J,IACFA,EAAO,WAGT,IAAIyH,EAAKxG,EAAMuG,cACXxE,EAAYyE,EAAGzE,UACfC,EAAYwE,EAAGxE,UACfF,EAAQ0E,EAAG1E,MACX6G,EAAKnC,EAAGvE,QACRC,EAAWyG,EAAGzG,SACdC,EAAmBwG,EAAGxG,iBACtB0I,EAAK7K,EAAMrE,MACXgG,EAAmBkJ,EAAGlJ,iBACtBC,EAAmBiJ,EAAGjJ,iBAC1B,IAAIM,GAAaC,GAAqBR,GAAqBC,EAA3D,CACA,IAAI6G,EAAc,CAChB1G,UAAWsH,MAAM+L,GAAWrT,EAAYqT,EACxCpT,UAAWqH,MAAMiM,GAAWtT,EAAYsT,EACxCxT,MAAOuH,MAAMkB,GAAYzI,EAAQyI,GAEnC/B,EAAiBxO,KAAKgG,EAAO,CAC3ByI,YAAaA,EACbC,MAAOA,EACP3J,KAAMA,MAIViB,EAAMwV,eAAiB,WACrB,IAAIhP,EAAKxG,EAAMuG,cAActE,QACzBC,EAAWsE,EAAGtE,SACdC,EAAmBqE,EAAGrE,kBACtBD,GAAaC,GACjByL,GAAqB5T,KAAKgG,IAG5BA,EAAMyV,gBAAkB,WACtBzV,EAAMqE,UAAY,KAClBrE,EAAMuG,cAAgBhF,EAAQA,EAAQA,EAAQ,GAAIvB,EAAMuG,eAAgB,CACtEzE,MAAO,EAAaA,MACpBC,UAAW,EAAaA,UACxBC,UAAW,EAAaA,YACtBhC,EAAMpE,MAAMsS,eAEhBlO,EAAM0V,eAMR1V,EAAM2V,oBAAsB,SAAUhU,GACpC3B,EAAMsP,SAAS,CACb3N,iBAAkBA,KAItB3B,EAAM4V,oBAAsB,SAAUhU,GACpC5B,EAAMsP,SAAS,CACb1N,iBAAkBA,IACjB,WACD,IAAI4E,EAAKxG,EAAMuG,cACX5E,EAAmB6E,EAAG7E,iBACtBgH,EAAKnC,EAAGvE,QACRW,EAAgB+F,EAAG/F,cACnBF,EAAgBiG,EAAGjG,cACnBC,EAAiBgG,EAAGhG,eACpBb,EAAQ0E,EAAG1E,MACX+I,EAAK7K,EAAMpE,MAAMsS,cACjBnM,EAAY8I,EAAG9I,UACfC,EAAY6I,EAAG7I,UAEnB,GAAIU,IAAkBC,GAAkBC,IAAkBb,IAAcC,EAAW,CACjF,IAAI6T,EAAY,6BAA+B/T,EAAQ,IACvDF,EAAiBpB,MAAMqV,UAAYA,EACnCjU,EAAiBpB,MAAMsV,gBAAkBD,EAEzC7V,EAAM0V,cAEN,IAAIK,GAAc,IAAI3N,MAAOC,UAEzB2N,EAAaC,aAAY,WAC3B,GAAItU,EAAiB+H,YAAa,CAChC,IAAIH,EAAS4C,GAAsBnS,KAAKgG,EAAO8B,GAAO,GACtD9B,EAAMuG,cAAcxE,UAAYwH,EAAOnH,aACvCpC,EAAMuG,cAAcvE,UAAYuH,EAAOjH,aAEvCtC,EAAM+I,oBAAoB,KAAM,KAAM,MAEtCmN,cAAcF,GACdA,EAAa,UACJ,IAAI5N,MAAOC,UAAY0N,EAXhB,MAYhBG,cAAcF,GACdA,EAAa,QAEd,SAEHhW,EAAM+I,oBAAoB,KAAM,KAAM,UAK5C/I,EAAM+I,oBAAsB,SAAUwB,EAAU4L,EAAMC,GACpD,GAAKpW,EAAM+H,QAAX,CACA,IAAInG,EAAmB5B,EAAMrE,MAAMiG,iBAC/ByU,EAAerW,EAAMpE,MAAMya,aAC3B7P,EAAKxG,EAAMuG,cACX1E,EAAgB2E,EAAG3E,cACnBC,EAAQ0E,EAAG1E,MACXC,EAAYyE,EAAGzE,UACfC,EAAYwE,EAAGxE,UACnB,IAAKJ,EAAkB,OAAOwI,QAAQC,MAAM,iCAC5C,IAAIwL,EAAY,cAAgBM,GAAQpU,GAAa,QAAUqU,GAAQpU,GAAa,cAAgBuI,GAAYzI,GAAS,IACzHF,EAAiBpB,MAAMqV,UAAYA,EACnCjU,EAAiBpB,MAAMsV,gBAAkBD,EAEzC7V,EAAM0V,cAEFW,GAAgBxU,IAAkBC,GACpCqE,EAAekQ,EAAcrW,EAAMsT,sBAOvCtT,EAAMsT,iBAAmB,WACvB,OAAOtB,GAAwBhS,EAAMuG,gBAGhCvG,EAwFT,OAhmBAqB,EAAUkR,EAAeD,GA2gBzBC,EAAcra,UAAUoe,kBAAoB,WAG1Cjd,OAAOC,iBAAiB,YAAa7B,KAAKyc,oBAFC,GAG3C7a,OAAOC,iBAAiB,YAAa7B,KAAKmT,eAHC,GAI3CvR,OAAOC,iBAAiB,UAAW7B,KAAK4c,mBAJG,IAO7C9B,EAAcra,UAAUqe,qBAAuB,WAE7Cld,OAAOE,oBAAoB,YAAa9B,KAAKyc,oBADF,GAE3C7a,OAAOE,oBAAoB,YAAa9B,KAAKmT,eAFF,GAG3CvR,OAAOE,oBAAoB,UAAW9B,KAAK4c,mBAHA,GAI3CvM,EAAuB9N,KAAKvC,OAG9B8a,EAAcra,UAAUse,mBAAqB,SAAUC,EAAUC,GAC/D,IA56CqBC,EA46CjBnQ,EAAK/O,KAAKkE,MACVgG,EAAmB6E,EAAG7E,iBACtBC,EAAmB4E,EAAG5E,iBACtB4Q,EAAgB/a,KAAKmE,MAAM4W,cAM/B,IAJKkE,EAAS9U,kBAAoBA,IAChCnK,KAAK8O,cAAc3E,iBAAmBA,IAGnC8U,EAAS/U,kBAAoBA,QAAyChH,IAArBgH,EAAgC,CACpFlK,KAAK8O,cAAc5E,iBAAmBA,EACtClK,KAAKgb,uBAv7CckE,EAu7C0BhV,GAr7C1CtI,OAAOyS,WAAa6K,EAAQjN,YADd,EAu7CjBjS,KAAKib,sBA77CX,SAAyBiE,GACvB,OAAKA,EACEtd,OAAO8X,YAAcwF,EAAQ/M,aADf,EA47CYgN,CAAgBjV,GAG7CA,EAAiBrI,iBAAiB,QAAS7B,KAAKyb,aADL,GAE3CvR,EAAiBrI,iBAAiB,WAAY7B,KAAKwd,eAFR,GAG3CtT,EAAiBrI,iBAAiB,aAAc7B,KAAKod,kBAHV,GAI3ClT,EAAiBrI,iBAAiB,YAAa7B,KAAKqd,aAJT,GAK3CnT,EAAiBrI,iBAAiB,WAAY7B,KAAKsd,iBALR,IASzCpT,GAAoBC,GAAoB6U,EAASjE,gBAAkBA,KACrE/a,KAAKwb,UAAY9G,GAAsBnS,KAAKvC,KAAMA,KAAK8O,cAAczE,MAAOrK,KAAK8O,cAActE,QAAQU,iBAIrG8T,EAASjE,eAAiBiE,EAASjE,gBAAkBA,IACvD/a,KAAK4M,UAAY,KACjB5M,KAAK8O,cAAgBhF,EAAQA,EAAQ,GAAI9J,KAAK8O,eAAgBG,EAAWjP,KAAK8O,cAAeiM,IAC7F/a,KAAKsR,oBAAoB,KAAM,KAAM,QAIzCwJ,EAAcra,UAAUmI,OAAS,WAC/B,IAAImG,EAAK/O,KAAKkE,MACVgG,EAAmB6E,EAAG7E,iBACtBC,EAAmB4E,EAAG5E,iBAKtB0D,EAAQ,CACVuR,OAAQC,QAAQnV,GAAoBC,GACpCjG,MAAOlE,KAAK6b,mBACZyD,SAAU,CACR7B,SAAUzd,KAAKyd,SACfC,aAAc1d,KAAK0d,aACnBE,aAAc5d,KAAK4d,aACnBjR,OAAQ3M,KAAK2M,OACbI,QAAS/M,KAAK+M,QACd+Q,aAAc9d,KAAK8d,aACnBC,eAAgB/d,KAAK+d,eACrBC,gBAAiBhe,KAAKge,iBAExBuB,MAAO,CACLrB,oBAAqBle,KAAKke,oBAC1BC,oBAAqBne,KAAKme,sBAG1Bpd,EAAWf,KAAKmE,MAAMpD,SACtBye,EAA8B,mBAAbze,EAA0BA,EAAS+I,EAAQA,EAAQ,GAAI+D,EAAM3J,OAAQ2J,EAAMyR,WAAave,EAC7G,OAAO,IAAMqI,cAAcqR,GAAQgF,SAAU,CAC3C5R,MAAOA,GACN2R,IAGE1E,EAjmBT,CAkmBE,aAEE,GAAmB,SAA0B/L,GAC/C,IAAIhO,EAAWgO,EAAGhO,SACd4V,EAAmB5H,EAAG4H,iBACtBC,EAAmB7H,EAAG6H,iBACtBF,EAAe3H,EAAG2H,aAClBgF,EAAe3M,EAAG2M,aAClBC,EAAU5M,EAAG4M,QACbC,EAAc7M,EAAG6M,YACjBY,EAAiBzN,EAAGyN,eACpBG,EAAY5N,EAAG4N,UACfE,EAAgB9N,EAAG8N,cACnBE,EAAkBhO,EAAGgO,gBACrBE,EAAalO,EAAGkO,WAChBE,EAAiBpO,EAAGoO,eACpByB,EAAe7P,EAAG6P,aAClBc,EAxtDN,SAAgB1V,EAAGtI,GACjB,IAAIqI,EAAI,GAER,IAAK,IAAIJ,KAAKK,EACRhI,OAAOvB,UAAU6B,eAAeC,KAAKyH,EAAGL,IAAMjI,EAAEie,QAAQhW,GAAK,IAAGI,EAAEJ,GAAKK,EAAEL,IAG/E,GAAS,MAALK,GAAqD,mBAAjChI,OAAO4d,sBAA2C,KAAIzd,EAAI,EAAb,IAAgBwH,EAAI3H,OAAO4d,sBAAsB5V,GAAI7H,EAAIwH,EAAEvH,OAAQD,IAClIT,EAAEie,QAAQhW,EAAExH,IAAM,GAAKH,OAAOvB,UAAUof,qBAAqBtd,KAAKyH,EAAGL,EAAExH,MAAK4H,EAAEJ,EAAExH,IAAM6H,EAAEL,EAAExH,KAEhG,OAAO4H,EA8sDI+V,CAAO/Q,EAAI,CAAC,WAAY,mBAAoB,mBAAoB,eAAgB,eAAgB,UAAW,cAAe,iBAAkB,YAAa,gBAAiB,kBAAmB,aAAc,iBAAkB,iBAEpO5K,EAAQ2F,EAAQ,GAAI4V,GAMxB,OAJIvb,EAAMqG,SAAWrG,EAAMqG,QAAQU,iBACjC/G,EAAMqG,QAAQS,eAAgB,GAGzB,IAAM7B,cAAc,GAAe,CACxCqN,cAAelI,EAAqB,CAClCjE,UAAWqM,EACXpM,UAAWqM,EACXvM,MAAOqM,IAETqE,cAAexM,EAAqBgM,GAAwBpW,IAC5DuX,aAAcA,EACdC,QAASA,EACTC,YAAaA,EACbY,eAAgBA,EAChBG,UAAWA,EACXE,cAAeA,EACfE,gBAAiBA,EACjBE,WAAYA,EACZE,eAAgBA,EAChByB,aAAcA,GACb7d,IAgCL,IACIgf,GACW,6CADXA,GAES,4CAhCb,SAAqBC,EAAKrZ,QACZ,IAARA,IAAgBA,EAAM,IAC1B,IAAIsZ,EAAWtZ,EAAIsZ,SAEnB,GAAKD,GAA2B,oBAAb5b,SAAnB,CAIA,IAAI8b,EAAO9b,SAAS8b,MAAQ9b,SAAS+b,qBAAqB,QAAQ,GAC9DpX,EAAQ3E,SAASgF,cAAc,SACnCL,EAAMzB,KAAO,WAEI,QAAb2Y,GACEC,EAAKE,WACPF,EAAKG,aAAatX,EAAOmX,EAAKE,YAKhCF,EAAKI,YAAYvX,GAGfA,EAAMwX,WACRxX,EAAMwX,WAAWC,QAAUR,EAE3BjX,EAAMuX,YAAYlc,SAASqc,eAAeT,KAS9CU,CALU,6rBAOV,IAAI,GAEJ,SAAU7F,GAGR,SAAS8F,IACP,IAAIpY,EAAmB,OAAXsS,GAAmBA,EAAO9a,MAAMC,KAAMC,YAAcD,KAIhE,OAFAuI,EAAMqY,WAAa,IAAMC,YACzBtY,EAAMuY,WAAa,IAAMD,YAClBtY,EAgCT,OAvCAqB,EAAU+W,EAAoB9F,GAU9B8F,EAAmBlgB,UAAUoe,kBAAoB,WAC/C,IAAIU,EAAQvf,KAAK+gB,QAAQxB,MACzBA,EAAMrB,oBAAoBle,KAAK4gB,WAAWpZ,SAC1C+X,EAAMpB,oBAAoBne,KAAK8gB,WAAWtZ,UAG5CmZ,EAAmBlgB,UAAUmI,OAAS,WACpC,IAAI7H,EAAWf,KAAKmE,MAAMpD,SACtBgO,EAAK/O,KAAK+gB,QAAQ7c,MAClBoG,EAAYyE,EAAGzE,UACfC,EAAYwE,EAAGxE,UACfF,EAAQ0E,EAAG1E,MACX6G,EAAKnC,EAAGvE,QACRY,EAAe8F,EAAG9F,aAClBC,EAAe6F,EAAG7F,aAClBtC,EAAQ,CACVsV,gBAAiB,aAAe/T,EAAY,OAASC,EAAY,aAAeF,EAAQ,IACxF+T,UAAW,aAAe9T,EAAY,OAASC,EAAY,aAAeF,EAAQ,KAEpF,OAAO,IAAMjB,cAAc,MAAO,CAChCzC,IAAK3G,KAAK4gB,WACV9X,UAAW,6BAA+BiX,GAAmB,IAAM3U,GAClE,IAAMhC,cAAc,MAAO,CAC5BzC,IAAK3G,KAAK8gB,WACVhY,UAAW,2BAA6BiX,GAAiB,IAAM1U,EAC/DtC,MAAOA,GACNhI,KAGE4f,EAxCT,CAyCE,IAAMK,WC33DR,SAASC,KACP,IAAIC,EAAS,KAAMlgB,EAAS,KAM5B,MALsB,oBAAXY,SACTsf,EAAQtf,OAAOyS,WACfrT,EAASY,OAAO8X,aAGX,CACLwH,QACAlgB,SACAmgB,YAJkBngB,EAASkgB,EAAQ,WAAa,aDu3DpD,GAAmBE,YAAc3G,GE3vDlB3Z,UAjHD,SAAC,GAA+B,IAA9BugB,EAA6B,EAA7BA,KAAMC,EAAuB,EAAvBA,KAAMC,EAAiB,EAAjBA,YACpBC,EAAaH,EAAKI,KAAKD,WAC7BF,EAAOI,IACLC,sBAAqBC,2BAAiBJ,GAAaK,UAD9CH,CAELJ,GACF,IAAMQ,EAAQC,0BAAgBT,GACxBU,EDTO,WACb,MAAgD3gB,mBAC9C,CAAC6f,MAAO,EAAGlgB,OAAQ,EAAGmgB,YAAa,cAD9Ba,EAAP,KAAyBC,EAAzB,KAcA,OAVAC,2BAAgB,WACd,SAASC,IACPF,EAAoBhB,MAKtB,OAFArf,OAAOC,iBAAiB,SAAUsgB,GAClCF,EAAoBhB,MACb,kBAAMrf,OAAOE,oBAAoB,SAAUqgB,MACjD,IAEIH,ECNkBI,GACnBC,EC1BO,SAACL,EAAkBT,GAChC,IAAOL,EAAiBc,EAAjBd,MAAOlgB,EAAUghB,EAAVhhB,OACRshB,EAAQf,EAAYL,MAAQK,EAAYvgB,OAC9C,OAAIugB,EAAYL,MAAQA,GAASK,EAAYvgB,OAASA,EAC7C,CAACuhB,SAAUrB,EAAOsB,UAAWxhB,IACXugB,EAAYL,MAAQA,GAASA,GAC5BK,EAAYvgB,OAASA,GAAUA,EAEvD,CAACuhB,SAAUrB,EAAOsB,UAAWtB,EAAQoB,GACrC,CAACC,SAAUvhB,EAASshB,EAAOE,UAAWxhB,GDiBvByhB,CAAgBT,EAAkBT,GAC/Cra,EAAcqa,EAAYmB,KAAKxb,YAC/BD,EAAUsa,EAAYmB,KAAKzb,QAC3BE,EAAYoa,EAAYmB,KAAKvb,UAC7Bwb,EAAe,CACnB,CAACC,WAAYzb,EAAW0b,WAAY1hB,EAAS,YAC7C,CAACyhB,WAAY1b,EAAa2b,WAAY1hB,EAAS,cAC/C,CAACyhB,WAAY3b,EAAS4b,WAAY1hB,EAAS,gBAEvC2hB,EAAiB3G,IACrBvc,IACE8hB,IAAQqB,WAAUC,IAAK,eACvBC,IAAO,cAAc,IAEvBN,GAEEG,GACF/a,mBAAS+a,EAAeF,YAE1B,MAA0CvhB,oBAAS,GAA5C6hB,EAAP,KAAsBC,EAAtB,KACMC,GAAeF,EACfG,EAAkBrc,EAAiBC,EAASC,EAAaC,GACzDmc,EAAgBJ,EAAgB,GAAKG,EAU3C,OACE,YAACE,EAAA,EAAD,CAAQjC,KAAMA,GACZ,+BAAKkC,cAAalC,GAAUgC,GAC1B,YAAC,EAAD,CAAatiB,OAAQghB,EAAiBhhB,QACnCkG,EACC,mBAAK4B,UAAU,6BACb,uBAAK,YAAC,OAAD,CAAM2a,GAAIvc,GAAV,OAEL,KACJ,YAAC,GAAD,CAAkB0X,aAlBD,SAAApN,GACJ,IAAfA,EAAKnH,MACP8Y,GAAiB,GAGjBA,GAAiB,IAaqCxX,IAAK,CAAClB,SAAU2Y,GAAcpW,YAAa,CAACC,KAAM,UAClG,YAAC,GAAD,KACE,YAAC,IAAD,CAAKyW,MAAOrC,EAAKsC,MAAMC,gBAAgBF,MAAOG,IAAK/B,EAAOA,MAAOA,EAC/DgC,QAAQ,QAAQ9D,IAAKqC,EAAY0B,WAAW,MAGjD5c,EACC,mBAAK2B,UAAU,2BACb,uBAAK,YAAC,OAAD,CAAM2a,GAAItc,GAAV,OAEL,KACHF,EACC,mBAAK6B,UAAU,yBACb,uBAAK,YAAC,OAAD,CAAM2a,GAAIxc,GAAV,OAEL,U,mBE3Ed/G,EAAOC,QAPP,SAAkB6E,GAChB,OAAOA,GAAKA,EAAE,wBAA0BA,EAAI,CAC1C,qBAAsBA,EACtB,wBAAwB,K,qBCH5B,IA+BImX,EA/BuB,EAAQ,OA+BX3c,CA7BS,EAAQ,OA6BKwkB,CAAc,CAAC,QA3BnC,EAAQ,SA2B4C,SAAcC,EAAIC,GAI9F,IAHA,IAAIC,EAAM,EACNC,EAAMF,EAAK9hB,OAER+hB,EAAMC,GAAK,CAChB,GAAIH,EAAGC,EAAKC,IACV,OAAOD,EAAKC,GAGdA,GAAO,OAIXjkB,EAAOC,QAAUgc,G,qBC5CjB,IAsBIzc,EAtBuB,EAAQ,OAsBZF,EAAQ,SAAa6kB,EAAG7a,GAC7C,OAAO6a,GAAK7a,KAGdtJ,EAAOC,QAAUT,G,qBC1BjB,IAAI4kB,EAAuB,EAAQ,QAE/BC,EAAsB,EAAQ,QA4B9BtB,EAAsBqB,GAAQ,SAAgBE,EAAMC,EAAKC,GAC3D,OAAOH,EAAOE,EAAKC,EAAIF,OAGzBtkB,EAAOC,QAAU8iB","file":"component---node-modules-gatsby-theme-photo-albums-src-templates-photo-js-b9765ed91278768f9d74.js","sourcesContent":["var _curry2 = /*#__PURE__*/require(\"./internal/_curry2\");\n\nvar _isFunction = /*#__PURE__*/require(\"./internal/_isFunction\");\n\nvar and = /*#__PURE__*/require(\"./and\");\n\nvar lift = /*#__PURE__*/require(\"./lift\");\n/**\n * A function which calls the two provided functions and returns the `&&`\n * of the results.\n * It returns the result of the first function if it is false-y and the result\n * of the second function otherwise. Note that this is short-circuited,\n * meaning that the second function will not be invoked if the first returns a\n * false-y value.\n *\n * In addition to functions, `R.both` also accepts any fantasy-land compatible\n * applicative functor.\n *\n * @func\n * @memberOf R\n * @since v0.12.0\n * @category Logic\n * @sig (*... -> Boolean) -> (*... -> Boolean) -> (*... -> Boolean)\n * @param {Function} f A predicate\n * @param {Function} g Another predicate\n * @return {Function} a function that applies its arguments to `f` and `g` and `&&`s their outputs together.\n * @see R.and\n * @example\n *\n *      const gt10 = R.gt(R.__, 10)\n *      const lt20 = R.lt(R.__, 20)\n *      const f = R.both(gt10, lt20);\n *      f(15); //=> true\n *      f(30); //=> false\n *\n *      R.both(Maybe.Just(false), Maybe.Just(55)); // => Maybe.Just(false)\n *      R.both([false, false, 'a'], [11]); //=> [false, false, 11]\n */\n\n\nvar both = /*#__PURE__*/_curry2(function both(f, g) {\n  return _isFunction(f) ? function _both() {\n    return f.apply(this, arguments) && g.apply(this, arguments);\n  } : lift(and)(f, g);\n});\n\nmodule.exports = both;","var _curry2 = /*#__PURE__*/require(\"./_curry2\");\n\nvar _reduced = /*#__PURE__*/require(\"./_reduced\");\n\nvar _xfBase = /*#__PURE__*/require(\"./_xfBase\");\n\nvar XFind = /*#__PURE__*/function () {\n  function XFind(f, xf) {\n    this.xf = xf;\n    this.f = f;\n    this.found = false;\n  }\n\n  XFind.prototype['@@transducer/init'] = _xfBase.init;\n\n  XFind.prototype['@@transducer/result'] = function (result) {\n    if (!this.found) {\n      result = this.xf['@@transducer/step'](result, void 0);\n    }\n\n    return this.xf['@@transducer/result'](result);\n  };\n\n  XFind.prototype['@@transducer/step'] = function (result, input) {\n    if (this.f(input)) {\n      this.found = true;\n      result = _reduced(this.xf['@@transducer/step'](result, input));\n    }\n\n    return result;\n  };\n\n  return XFind;\n}();\n\nvar _xfind = /*#__PURE__*/_curry2(function _xfind(f, xf) {\n  return new XFind(f, xf);\n});\n\nmodule.exports = _xfind;","/** @jsx jsx */\nimport { jsx } from 'theme-ui'\nimport PropTypes from 'prop-types'\n\nconst Photo = ({children, height}) => \n  <div sx={{variant: 'photoPage', height}}>\n    {children}\n  </div>\n\nPhoto.propTypes = {\n  children: PropTypes.oneOfType([\n    PropTypes.arrayOf(PropTypes.node),\n    PropTypes.node\n  ]).isRequired,\n  height: PropTypes.number.isRequired,\n}\n\nexport default Photo","// This hook was copied from https://usehooks.com/useKeyPress/ and modified\nimport { useState, useEffect } from 'react'\n\nexport default function useKeyUp(targetKey) {\n  // State for keeping track of whether key is pressed\n  const [keyPressed, setKeyPressed] = useState(false)\n\n  // Add event listeners\n  useEffect(() => {\n    // If released key is our target key then set to false\n    const upHandler = (e) => {\n      if (e.key === targetKey) {\n        setKeyPressed(true)\n      }\n    }\n    window.addEventListener('keyup', upHandler)\n    // Remove event listeners on cleanup\n    return () => {\n      window.removeEventListener('keyup', upHandler)\n    }\n  }, [targetKey])\n\n  return keyPressed\n}","import React from 'react';\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}\n\nvar defaultProps = {\n  preventDefaultTouchmoveEvent: false,\n  delta: 10,\n  rotationAngle: 0,\n  trackMouse: false,\n  trackTouch: true\n};\nvar initialState = {\n  xy: [0, 0],\n  swiping: false,\n  eventData: undefined,\n  start: undefined\n};\nvar LEFT = 'Left';\nvar RIGHT = 'Right';\nvar UP = 'Up';\nvar DOWN = 'Down';\nvar touchStart = 'touchstart';\nvar touchMove = 'touchmove';\nvar touchEnd = 'touchend';\nvar mouseMove = 'mousemove';\nvar mouseUp = 'mouseup';\n\nfunction getDirection(absX, absY, deltaX, deltaY) {\n  if (absX > absY) {\n    if (deltaX > 0) {\n      return LEFT;\n    }\n\n    return RIGHT;\n  } else if (deltaY > 0) {\n    return UP;\n  }\n\n  return DOWN;\n}\n\nfunction rotateXYByAngle(pos, angle) {\n  if (angle === 0) return pos;\n  var angleInRadians = Math.PI / 180 * angle;\n  var x = pos[0] * Math.cos(angleInRadians) + pos[1] * Math.sin(angleInRadians);\n  var y = pos[1] * Math.cos(angleInRadians) - pos[0] * Math.sin(angleInRadians);\n  return [x, y];\n}\n\nfunction getHandlers(set, handlerProps) {\n  var onStart = function onStart(event) {\n    // if more than a single touch don't track, for now...\n    if (event.touches && event.touches.length > 1) return;\n    set(function (state, props) {\n      // setup mouse listeners on document to track swipe since swipe can leave container\n      if (props.trackMouse) {\n        document.addEventListener(mouseMove, onMove);\n        document.addEventListener(mouseUp, onUp);\n      }\n\n      var _ref = event.touches ? event.touches[0] : event,\n          clientX = _ref.clientX,\n          clientY = _ref.clientY;\n\n      var xy = rotateXYByAngle([clientX, clientY], props.rotationAngle);\n      return _extends({}, state, initialState, {\n        eventData: {\n          initial: [].concat(xy),\n          first: true\n        },\n        xy: xy,\n        start: event.timeStamp || 0\n      });\n    });\n  };\n\n  var onMove = function onMove(event) {\n    set(function (state, props) {\n      if (!state.xy[0] || !state.xy[1] || event.touches && event.touches.length > 1) {\n        return state;\n      }\n\n      var _ref2 = event.touches ? event.touches[0] : event,\n          clientX = _ref2.clientX,\n          clientY = _ref2.clientY;\n\n      var _rotateXYByAngle = rotateXYByAngle([clientX, clientY], props.rotationAngle),\n          x = _rotateXYByAngle[0],\n          y = _rotateXYByAngle[1];\n\n      var deltaX = state.xy[0] - x;\n      var deltaY = state.xy[1] - y;\n      var absX = Math.abs(deltaX);\n      var absY = Math.abs(deltaY);\n      var time = (event.timeStamp || 0) - state.start;\n      var velocity = Math.sqrt(absX * absX + absY * absY) / (time || 1); // if swipe is under delta and we have not started to track a swipe: skip update\n\n      if (absX < props.delta && absY < props.delta && !state.swiping) return state;\n      var dir = getDirection(absX, absY, deltaX, deltaY);\n\n      var eventData = _extends({}, state.eventData, {\n        event: event,\n        absX: absX,\n        absY: absY,\n        deltaX: deltaX,\n        deltaY: deltaY,\n        velocity: velocity,\n        dir: dir\n      });\n\n      props.onSwiping && props.onSwiping(eventData); // track if a swipe is cancelable(handler for swiping or swiped(dir) exists)\n      // so we can call preventDefault if needed\n\n      var cancelablePageSwipe = false;\n\n      if (props.onSwiping || props.onSwiped || props[\"onSwiped\" + dir]) {\n        cancelablePageSwipe = true;\n      }\n\n      if (cancelablePageSwipe && props.preventDefaultTouchmoveEvent && props.trackTouch && event.cancelable) event.preventDefault(); // first is now always false\n\n      return _extends({}, state, {\n        eventData: _extends({}, eventData, {\n          first: false\n        }),\n        swiping: true\n      });\n    });\n  };\n\n  var onEnd = function onEnd(event) {\n    set(function (state, props) {\n      var eventData;\n\n      if (state.swiping) {\n        eventData = _extends({}, state.eventData, {\n          event: event\n        });\n        props.onSwiped && props.onSwiped(eventData);\n        props[\"onSwiped\" + eventData.dir] && props[\"onSwiped\" + eventData.dir](eventData);\n      }\n\n      return _extends({}, state, initialState, {\n        eventData: eventData\n      });\n    });\n  };\n\n  var cleanUpMouse = function cleanUpMouse() {\n    // safe to just call removeEventListener\n    document.removeEventListener(mouseMove, onMove);\n    document.removeEventListener(mouseUp, onUp);\n  };\n\n  var onUp = function onUp(e) {\n    cleanUpMouse();\n    onEnd(e);\n  };\n\n  var attachTouch = function attachTouch(el) {\n    if (el && el.addEventListener) {\n      // attach touch event listeners and handlers\n      var tls = [[touchStart, onStart], [touchMove, onMove], [touchEnd, onEnd]];\n      tls.forEach(function (_ref3) {\n        var e = _ref3[0],\n            h = _ref3[1];\n        return el.addEventListener(e, h);\n      }); // return properly scoped cleanup method for removing listeners\n\n      return function () {\n        return tls.forEach(function (_ref4) {\n          var e = _ref4[0],\n              h = _ref4[1];\n          return el.removeEventListener(e, h);\n        });\n      };\n    }\n  };\n\n  var onRef = function onRef(el) {\n    // \"inline\" ref functions are called twice on render, once with null then again with DOM element\n    // ignore null here\n    if (el === null) return;\n    set(function (state, props) {\n      // if the same DOM el as previous just return state\n      if (state.el === el) return state;\n      var addState = {}; // if new DOM el clean up old DOM and reset cleanUpTouch\n\n      if (state.el && state.el !== el && state.cleanUpTouch) {\n        state.cleanUpTouch();\n        addState.cleanUpTouch = null;\n      } // only attach if we want to track touch\n\n\n      if (props.trackTouch && el) {\n        addState.cleanUpTouch = attachTouch(el);\n      } // store event attached DOM el for comparison, clean up, and re-attachment\n\n\n      return _extends({}, state, {\n        el: el\n      }, addState);\n    });\n  }; // set ref callback to attach touch event listeners\n\n\n  var output = {\n    ref: onRef // if track mouse attach mouse down listener\n\n  };\n\n  if (handlerProps.trackMouse) {\n    output.onMouseDown = onStart;\n  }\n\n  return [output, attachTouch];\n}\n\nfunction updateTransientState(state, props, attachTouch) {\n  var addState = {}; // clean up touch handlers if no longer tracking touches\n\n  if (!props.trackTouch && state.cleanUpTouch) {\n    state.cleanUpTouch();\n    addState.cleanUpTouch = null;\n  } else if (props.trackTouch && !state.cleanUpTouch) {\n    // attach/re-attach touch handlers\n    if (state.el) {\n      addState.cleanUpTouch = attachTouch(state.el);\n    }\n  }\n\n  return _extends({}, state, addState);\n}\n\nfunction useSwipeable(props) {\n  var trackMouse = props.trackMouse;\n  var transientState = React.useRef(_extends({}, initialState, {\n    type: 'hook'\n  }));\n  var transientProps = React.useRef();\n  transientProps.current = _extends({}, defaultProps, props);\n\n  var _React$useMemo = React.useMemo(function () {\n    return getHandlers(function (cb) {\n      return transientState.current = cb(transientState.current, transientProps.current);\n    }, {\n      trackMouse: trackMouse\n    });\n  }, [trackMouse]),\n      handlers = _React$useMemo[0],\n      attachTouch = _React$useMemo[1];\n\n  transientState.current = updateTransientState(transientState.current, transientProps.current, attachTouch);\n  return handlers;\n}\n\nvar Swipeable = /*#__PURE__*/function (_React$PureComponent) {\n  _inheritsLoose(Swipeable, _React$PureComponent);\n\n  function Swipeable(props) {\n    var _this;\n\n    _this = _React$PureComponent.call(this, props) || this;\n\n    _this._set = function (cb) {\n      _this.transientState = cb(_this.transientState, _this.props);\n    };\n\n    _this.transientState = _extends({}, initialState, {\n      type: 'class'\n    });\n    return _this;\n  }\n\n  var _proto = Swipeable.prototype;\n\n  _proto.render = function render() {\n    var _this$props = this.props,\n        className = _this$props.className,\n        style = _this$props.style,\n        _this$props$nodeName = _this$props.nodeName,\n        nodeName = _this$props$nodeName === void 0 ? 'div' : _this$props$nodeName,\n        innerRef = _this$props.innerRef,\n        children = _this$props.children,\n        trackMouse = _this$props.trackMouse;\n\n    var _getHandlers = getHandlers(this._set, {\n      trackMouse: trackMouse\n    }),\n        handlers = _getHandlers[0],\n        attachTouch = _getHandlers[1];\n\n    this.transientState = updateTransientState(this.transientState, this.props, attachTouch);\n    var ref = innerRef ? function (el) {\n      return innerRef(el), handlers.ref(el);\n    } : handlers.ref;\n    return React.createElement(nodeName, _extends({}, handlers, {\n      className: className,\n      style: style,\n      ref: ref\n    }), children);\n  };\n\n  return Swipeable;\n}(React.PureComponent);\n\nSwipeable.defaultProps = defaultProps;\nexport { DOWN, LEFT, RIGHT, Swipeable, UP, useSwipeable };","import {navigate} from 'gatsby'\nimport {useSwipeable} from 'react-swipeable'\n\nexport default function useSwipeNavigate(nextUrl, previousUrl, parentUrl) {\n\n  const swipeHandlers = useSwipeable({\n    onSwipedLeft: () => {if (nextUrl) {navigate(nextUrl)}},\n    onSwipedRight: () => {if (previousUrl) {navigate(previousUrl)}},\n    onSwipedUp: () => {if (parentUrl) {navigate(parentUrl)}},\n    onSwipedDown: () => {if (parentUrl) {navigate(parentUrl)}},\n    trackMouse: true,\n  })\n\n  return swipeHandlers\n}","import React, { Component } from 'react';\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\n\n/* global Reflect, Promise */\n\nvar _extendStatics = function extendStatics(d, b) {\n  _extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) {\n      if (b.hasOwnProperty(p)) d[p] = b[p];\n    }\n  };\n\n  return _extendStatics(d, b);\n};\n\nfunction __extends(d, b) {\n  _extendStatics(d, b);\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nvar _assign = function __assign() {\n  _assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return _assign.apply(this, arguments);\n};\n\nfunction __rest(s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n}\n\nvar initialState = {\n  wrapperComponent: null,\n  contentComponent: null,\n  previousScale: 1,\n  scale: 1,\n  positionX: 0,\n  positionY: 0,\n  options: {\n    disabled: false,\n    transformEnabled: true,\n    minPositionX: null,\n    maxPositionX: null,\n    minPositionY: null,\n    maxPositionY: null,\n    minScale: 1,\n    maxScale: 8,\n    limitToBounds: true,\n    limitToWrapper: false,\n    centerContent: true,\n    wrapperClass: \"\",\n    contentClass: \"\"\n  },\n  wheel: {\n    disabled: false,\n    step: 5,\n    wheelEnabled: true,\n    touchPadEnabled: true,\n    limitsOnWheel: false\n  },\n  pan: {\n    disabled: false,\n    panAnimationType: \"linear\",\n    lockAxisX: false,\n    lockAxisY: false,\n    velocity: true,\n    velocityEqualToMove: true,\n    velocitySensitivity: 2,\n    velocityActiveScale: 1,\n    velocityMinSpeed: 1,\n    velocityBaseTime: 1600,\n    velocityAnimationType: \"easeOutQuart\",\n    padding: true,\n    paddingSize: 30,\n    panReturnAnimationTime: 400,\n    panReturnAnimationType: \"easeOut\",\n    disableOnTarget: []\n  },\n  pinch: {\n    disabled: false\n  },\n  zoomIn: {\n    disabled: false,\n    step: 20,\n    animation: true,\n    animationType: \"easeOut\",\n    animationTime: 200\n  },\n  zoomOut: {\n    disabled: false,\n    step: 20,\n    animation: true,\n    animationType: \"easeOut\",\n    animationTime: 200\n  },\n  doubleClick: {\n    disabled: false,\n    step: 20,\n    mode: \"zoomIn\",\n    animation: true,\n    animationType: \"easeOut\",\n    animationTime: 200\n  },\n  reset: {\n    disabled: false,\n    animation: true,\n    animationType: \"easeOut\",\n    animationTime: 200\n  },\n  scalePadding: {\n    disabled: false,\n    size: 0.2,\n    animationTime: 200,\n    animationType: \"easeOut\"\n  }\n};\n/**\r\n * Rounds number to given decimal\r\n * eg. roundNumber(2.34343, 1) => 2.3\r\n */\n\nvar roundNumber = function roundNumber(num, decimal) {\n  return Number(num.toFixed(decimal));\n};\n/**\r\n * Checks if value is number, if not it returns default value\r\n * 1# eg. checkIsNumber(2, 30) => 2\r\n * 2# eg. checkIsNumber(null, 30) => 30\r\n */\n\n\nvar checkIsNumber = function checkIsNumber(num, defaultValue) {\n  return typeof num === \"number\" ? num : defaultValue;\n};\n/**\r\n * Keeps value between given bounds, used for limiting view to given boundaries\r\n * 1# eg. boundLimiter(2, 0, 3, true) => 2\r\n * 2# eg. boundLimiter(4, 0, 3, true) => 3\r\n * 3# eg. boundLimiter(-2, 0, 3, true) => 0\r\n * 4# eg. boundLimiter(10, 0, 3, false) => 10\r\n */\n\n\nvar boundLimiter = function boundLimiter(value, minBound, maxBound, isActive) {\n  if (!isActive) return roundNumber(value, 2);\n  if (value < minBound) return roundNumber(minBound, 2);\n  if (value > maxBound) return roundNumber(maxBound, 2);\n  return roundNumber(value, 2);\n};\n/**\r\n * Calculate bounding area of zoomed/panned element\r\n */\n\n\nvar calculateBoundingArea = function calculateBoundingArea(wrapperWidth, newContentWidth, diffWidth, wrapperHeight, newContentHeight, diffHeight, limitToWrapper) {\n  var scaleWidthFactor = wrapperWidth > newContentWidth ? diffWidth * (limitToWrapper ? 1 : 0.5) : 0;\n  var scaleHeightFactor = wrapperHeight > newContentHeight ? diffHeight * (limitToWrapper ? 1 : 0.5) : 0;\n  var minPositionX = wrapperWidth - newContentWidth - scaleWidthFactor;\n  var maxPositionX = scaleWidthFactor;\n  var minPositionY = wrapperHeight - newContentHeight - scaleHeightFactor;\n  var maxPositionY = scaleHeightFactor;\n  return {\n    minPositionX: minPositionX,\n    maxPositionX: maxPositionX,\n    minPositionY: minPositionY,\n    maxPositionY: maxPositionY\n  };\n};\n/**\r\n * Returns distance between two points x,y\r\n */\n\n\nvar getDistance = function getDistance(firstPoint, secondPoint) {\n  return Math.sqrt(Math.pow(firstPoint.pageX - secondPoint.pageX, 2) + Math.pow(firstPoint.pageY - secondPoint.pageY, 2));\n};\n/**\r\n * Delete undefined values from object keys\r\n * Used for deleting empty props\r\n */\n\n\nvar deleteUndefinedProps = function deleteUndefinedProps(value) {\n  var newObject = _assign({}, value);\n\n  Object.keys(newObject).forEach(function (key) {\n    return newObject[key] === undefined && delete newObject[key];\n  });\n  return newObject;\n};\n/**\r\n * Fire callback if it's function\r\n */\n\n\nvar handleCallback = function handleCallback(callback, props) {\n  if (callback && typeof callback === \"function\") {\n    callback(props);\n  }\n};\n\nvar handleWheelStop = function handleWheelStop(previousEvent, event, stateProvider) {\n  var scale = stateProvider.scale,\n      _a = stateProvider.options,\n      maxScale = _a.maxScale,\n      minScale = _a.minScale;\n  if (!previousEvent) return false;\n  if (scale < maxScale || scale > minScale) return true;\n  if (Math.sign(previousEvent.deltaY) !== Math.sign(event.deltaY)) return true;\n  if (previousEvent.deltaY > 0 && previousEvent.deltaY < event.deltaY) return true;\n  if (previousEvent.deltaY < 0 && previousEvent.deltaY > event.deltaY) return true;\n  if (Math.sign(previousEvent.deltaY) !== Math.sign(event.deltaY)) return true;\n  return false;\n};\n\nvar mergeProps = function mergeProps(initialState, dynamicProps) {\n  return Object.keys(initialState).reduce(function (acc, curr) {\n    if (typeof dynamicProps[curr] === \"object\" && dynamicProps[curr] !== null) {\n      acc[curr] = _assign(_assign({}, initialState[curr]), dynamicProps[curr]);\n    } else {\n      acc[curr] = dynamicProps[curr] === undefined ? initialState[curr] : dynamicProps[curr];\n    }\n\n    return acc;\n  }, {});\n};\n\nfunction getWindowScaleY(wrapper) {\n  if (!wrapper) return 0;\n  return window.innerHeight / wrapper.offsetHeight;\n}\n\nfunction getWindowScaleX(wrapper) {\n  if (!wrapper) return 0;\n  return window.innerWidth / wrapper.offsetWidth;\n}\n/**\r\n * Functions should return denominator of the target value, which is the next animation step.\r\n * t is a value from 0 to 1, reflecting the percentage of animation status.\r\n */\n\n\nvar easeOut = function easeOut(t) {\n  return -Math.cos(t * Math.PI) / 2 + 0.5;\n}; // linear\n\n\nvar linear = function linear(t) {\n  return t;\n}; // accelerating from zero velocity\n\n\nvar easeInQuad = function easeInQuad(t) {\n  return t * t;\n}; // decelerating to zero velocity\n\n\nvar easeOutQuad = function easeOutQuad(t) {\n  return t * (2 - t);\n}; // acceleration until halfway, then deceleration\n\n\nvar easeInOutQuad = function easeInOutQuad(t) {\n  return t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t;\n}; // accelerating from zero velocity\n\n\nvar easeInCubic = function easeInCubic(t) {\n  return t * t * t;\n}; // decelerating to zero velocity\n\n\nvar easeOutCubic = function easeOutCubic(t) {\n  return --t * t * t + 1;\n}; // acceleration until halfway, then deceleration\n\n\nvar easeInOutCubic = function easeInOutCubic(t) {\n  return t < 0.5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1;\n}; // accelerating from zero velocity\n\n\nvar easeInQuart = function easeInQuart(t) {\n  return t * t * t * t;\n}; // decelerating to zero velocity\n\n\nvar easeOutQuart = function easeOutQuart(t) {\n  return 1 - --t * t * t * t;\n}; // acceleration until halfway, then deceleration\n\n\nvar easeInOutQuart = function easeInOutQuart(t) {\n  return t < 0.5 ? 8 * t * t * t * t : 1 - 8 * --t * t * t * t;\n}; // accelerating from zero velocity\n\n\nvar easeInQuint = function easeInQuint(t) {\n  return t * t * t * t * t;\n}; // decelerating to zero velocity\n\n\nvar easeOutQuint = function easeOutQuint(t) {\n  return 1 + --t * t * t * t * t;\n}; // acceleration until halfway, then deceleration\n\n\nvar easeInOutQuint = function easeInOutQuint(t) {\n  return t < 0.5 ? 16 * t * t * t * t * t : 1 + 16 * --t * t * t * t * t;\n};\n\nvar availableAnimations = {\n  easeOut: easeOut,\n  linear: linear,\n  easeInQuad: easeInQuad,\n  easeOutQuad: easeOutQuad,\n  easeInOutQuad: easeInOutQuad,\n  easeInCubic: easeInCubic,\n  easeOutCubic: easeOutCubic,\n  easeInOutCubic: easeInOutCubic,\n  easeInQuart: easeInQuart,\n  easeOutQuart: easeOutQuart,\n  easeInOutQuart: easeInOutQuart,\n  easeInQuint: easeInQuint,\n  easeOutQuint: easeOutQuint,\n  easeInOutQuint: easeInOutQuint\n};\n\nfunction handleDisableAnimation() {\n  if (!this.mounted) return;\n\n  if (this.animation) {\n    cancelAnimationFrame(this.animation);\n  }\n\n  this.animate = false;\n  this.animation = false;\n  this.velocity = false;\n}\n\nfunction animate(animationName, animationTime, callback) {\n  var _this = this;\n\n  if (!this.mounted) return;\n  var startTime = new Date().getTime();\n  var lastStep = 1; // if another animation is active\n\n  handleDisableAnimation.call(this); // new animation\n\n  this.animation = function () {\n    if (!_this.animation || !_this.mounted) return;\n    var frameTime = new Date().getTime() - startTime;\n    var animationProgress = frameTime / animationTime;\n    var animationType = availableAnimations[animationName];\n    var step = animationType(animationProgress);\n\n    if (frameTime >= animationTime) {\n      callback(lastStep);\n      _this.animation = null;\n    } else {\n      callback(step);\n      requestAnimationFrame(_this.animation);\n    }\n  };\n\n  requestAnimationFrame(this.animation);\n}\n\nfunction animateComponent(_a) {\n  var _this = this;\n\n  var targetState = _a.targetState,\n      speed = _a.speed,\n      type = _a.type;\n  var _b = this.stateProvider,\n      scale = _b.scale,\n      positionX = _b.positionX,\n      positionY = _b.positionY;\n  var scaleDiff = targetState.scale - scale;\n  var positionXDiff = targetState.positionX - positionX;\n  var positionYDiff = targetState.positionY - positionY;\n\n  if (speed === 0) {\n    this.stateProvider.previousScale = this.stateProvider.scale;\n    this.stateProvider.scale = targetState.scale;\n    this.stateProvider.positionX = targetState.positionX;\n    this.stateProvider.positionY = targetState.positionY;\n    this.applyTransformation();\n  } else {\n    // animation start timestamp\n    animate.call(this, type, speed, function (step) {\n      _this.stateProvider.previousScale = _this.stateProvider.scale;\n      _this.stateProvider.scale = scale + scaleDiff * step;\n      _this.stateProvider.positionX = positionX + positionXDiff * step;\n      _this.stateProvider.positionY = positionY + positionYDiff * step; // apply animation changes\n\n      _this.applyTransformation();\n    });\n  }\n}\n\nfunction checkZoomBounds(zoom, minScale, maxScale, zoomPadding, enablePadding) {\n  var scalePadding = enablePadding ? zoomPadding : 0;\n  var minScaleWithPadding = minScale - scalePadding;\n  if (!isNaN(maxScale) && zoom >= maxScale) return maxScale;\n  if (!isNaN(minScale) && zoom <= minScaleWithPadding) return minScaleWithPadding;\n  return zoom;\n}\n\nfunction checkPositionBounds(positionX, positionY, bounds, limitToBounds, paddingValue, wrapperComponent) {\n  var minPositionX = bounds.minPositionX,\n      minPositionY = bounds.minPositionY,\n      maxPositionX = bounds.maxPositionX,\n      maxPositionY = bounds.maxPositionY;\n  var paddingX = wrapperComponent ? paddingValue * wrapperComponent.offsetWidth / 100 : 0;\n  var paddingY = wrapperComponent ? paddingValue * wrapperComponent.offsetHeight / 100 : 0;\n  var x = boundLimiter(positionX, minPositionX - paddingX, maxPositionX + paddingX, limitToBounds);\n  var y = boundLimiter(positionY, minPositionY - paddingY, maxPositionY + paddingY, limitToBounds);\n  return {\n    x: x,\n    y: y\n  };\n}\n\nfunction getDelta(event, customDelta) {\n  var deltaY = event ? event.deltaY < 0 ? 1 : -1 : 0;\n  var delta = checkIsNumber(customDelta, deltaY);\n  return delta;\n}\n\nfunction wheelMousePosition(event, contentComponent, scale) {\n  var contentRect = contentComponent.getBoundingClientRect(); // mouse position x, y over wrapper component\n\n  var mouseX = (event.clientX - contentRect.left) / scale;\n  var mouseY = (event.clientY - contentRect.top) / scale;\n  if (isNaN(mouseX) || isNaN(mouseY)) console.error(\"No mouse or touch offset found\");\n  return {\n    mouseX: mouseX,\n    mouseY: mouseY\n  };\n}\n\nfunction getComponentsSizes(wrapperComponent, contentComponent, newScale) {\n  var wrapperWidth = wrapperComponent.offsetWidth;\n  var wrapperHeight = wrapperComponent.offsetHeight;\n  var contentWidth = contentComponent.offsetWidth;\n  var contentHeight = contentComponent.offsetHeight;\n  var newContentWidth = contentWidth * newScale;\n  var newContentHeight = contentHeight * newScale;\n  var newDiffWidth = wrapperWidth - newContentWidth;\n  var newDiffHeight = wrapperHeight - newContentHeight;\n  return {\n    wrapperWidth: wrapperWidth,\n    wrapperHeight: wrapperHeight,\n    newContentWidth: newContentWidth,\n    newDiffWidth: newDiffWidth,\n    newContentHeight: newContentHeight,\n    newDiffHeight: newDiffHeight\n  };\n}\n\nfunction handleCalculatePositions(mouseX, mouseY, newScale, bounds, limitToBounds) {\n  var _a = this.stateProvider,\n      scale = _a.scale,\n      positionX = _a.positionX,\n      positionY = _a.positionY,\n      transformEnabled = _a.options.transformEnabled;\n  var scaleDifference = newScale - scale;\n  if (typeof mouseX !== \"number\" || typeof mouseY !== \"number\") return console.error(\"Mouse X and Y position were not provided!\");\n  if (!transformEnabled) return {\n    newPositionX: positionX,\n    newPositionY: positionY\n  };\n  var calculatedPositionX = positionX - mouseX * scaleDifference;\n  var calculatedPositionY = positionY - mouseY * scaleDifference; // do not limit to bounds when there is padding animation,\n  // it causes animation strange behaviour\n\n  var newPositions = checkPositionBounds(calculatedPositionX, calculatedPositionY, bounds, limitToBounds, 0, null);\n  return newPositions;\n}\n\nfunction getClientPosition(event) {\n  var touches = event.touches; // Mobile points\n\n  if (touches && touches.length === 1) {\n    return {\n      clientX: touches[0].clientX,\n      clientY: touches[0].clientY\n    };\n  } // Desktop points\n\n\n  if (!touches) {\n    return {\n      clientX: event.clientX,\n      clientY: event.clientY\n    };\n  }\n\n  return null;\n}\n\nfunction handlePanning(event) {\n  var _a = this.stateProvider,\n      scale = _a.scale,\n      positionX = _a.positionX,\n      positionY = _a.positionY,\n      _b = _a.options,\n      limitToBounds = _b.limitToBounds,\n      minScale = _b.minScale,\n      _c = _a.pan,\n      lockAxisX = _c.lockAxisX,\n      lockAxisY = _c.lockAxisY,\n      padding = _c.padding,\n      paddingSize = _c.paddingSize,\n      wrapperComponent = _a.wrapperComponent;\n  if (!this.startCoords) return;\n  var _d = this.startCoords,\n      x = _d.x,\n      y = _d.y;\n  var positions = getClientPosition(event);\n  if (!positions) return console.error(\"Cannot find mouse client positions\");\n  var clientX = positions.clientX,\n      clientY = positions.clientY; // Get Position\n\n  var mouseX = clientX - x;\n  var mouseY = clientY - y;\n  var newPositionX = lockAxisX ? positionX : mouseX;\n  var newPositionY = lockAxisY ? positionY : mouseY; // padding\n\n  var paddingValue = padding && scale >= minScale ? paddingSize : 0; // If position didn't change\n\n  if (newPositionX === positionX && newPositionY === positionY) return;\n  var calculatedPosition = checkPositionBounds(newPositionX, newPositionY, this.bounds, limitToBounds, paddingValue, wrapperComponent); // Save panned position\n\n  handlePaddingAnimation.call(this, calculatedPosition.x, calculatedPosition.y);\n}\n\nfunction handlePanningAnimation() {\n  var _a = this.stateProvider,\n      scale = _a.scale,\n      minScale = _a.options.minScale,\n      _b = _a.pan,\n      disabled = _b.disabled,\n      padding = _b.padding,\n      panReturnAnimationTime = _b.panReturnAnimationTime,\n      panReturnAnimationType = _b.panReturnAnimationType;\n  var isDisabled = disabled || scale < minScale || !padding;\n  if (isDisabled) return;\n  var targetState = handlePanToBounds.call(this);\n  animateComponent.call(this, {\n    targetState: targetState,\n    speed: panReturnAnimationTime,\n    type: panReturnAnimationType\n  });\n}\n\nfunction handlePanToBounds() {\n  var _a = this.stateProvider,\n      positionX = _a.positionX,\n      positionY = _a.positionY,\n      scale = _a.scale,\n      _b = _a.options,\n      disabled = _b.disabled,\n      limitToBounds = _b.limitToBounds,\n      limitToWrapper = _b.limitToWrapper;\n  var wrapperComponent = this.state.wrapperComponent;\n  if (disabled) return;\n  var _c = this.bounds,\n      maxPositionX = _c.maxPositionX,\n      minPositionX = _c.minPositionX,\n      maxPositionY = _c.maxPositionY,\n      minPositionY = _c.minPositionY;\n  var xChanged = positionX > maxPositionX || positionX < minPositionX;\n  var yChanged = positionY > maxPositionY || positionY < minPositionY;\n  var mouseX = positionX > maxPositionX ? wrapperComponent.offsetWidth : this.stateProvider.minPositionX || 0;\n  var mouseY = positionY > maxPositionY ? wrapperComponent.offsetHeight : this.stateProvider.minPositionY || 0;\n  var mousePosX = mouseX;\n  var mousePosY = mouseY;\n\n  var _d = handleCalculatePositions.call(this, mousePosX, mousePosY, scale, this.bounds, limitToBounds || limitToWrapper),\n      x = _d.x,\n      y = _d.y;\n\n  return {\n    scale: scale,\n    positionX: xChanged ? x : positionX,\n    positionY: yChanged ? y : positionY\n  };\n}\n\nfunction handlePaddingAnimation(positionX, positionY) {\n  var padding = this.stateProvider.pan.padding;\n  if (!padding) return;\n  this.stateProvider.positionX = positionX;\n  this.stateProvider.positionY = positionY;\n  this.applyTransformation();\n}\n\nfunction handleCalculateZoom(delta, step, disablePadding, getTarget, isBtnFunction) {\n  var _a = this.stateProvider,\n      scale = _a.scale,\n      _b = _a.options,\n      maxScale = _b.maxScale,\n      minScale = _b.minScale,\n      _c = _a.scalePadding,\n      size = _c.size,\n      disabled = _c.disabled,\n      wrapperComponent = _a.wrapperComponent;\n  var targetScale = null;\n\n  if (isBtnFunction) {\n    var scaleFactor = window.innerWidth * 0.0001;\n    var zoomFactor = delta < 0 ? 30 : 20;\n    targetScale = scale + (step - step * scaleFactor) * delta * (scale / zoomFactor);\n  } else {\n    var wrapperToWindowScale = 2 - window.innerWidth / wrapperComponent.offsetWidth;\n    var scaleFactor = Math.max(0.2, Math.min(0.99, wrapperToWindowScale));\n    var zoomFactor = 20;\n    targetScale = scale + step * delta * ((scale - scale * scaleFactor) / zoomFactor);\n  }\n\n  if (getTarget) return targetScale;\n  var paddingEnabled = disablePadding ? false : !disabled;\n  var newScale = checkZoomBounds(roundNumber(targetScale, 3), minScale, maxScale, size, paddingEnabled);\n  return newScale;\n}\n\nfunction handleCalculateBounds(newScale, limitToWrapper) {\n  var _a = this.stateProvider,\n      wrapperComponent = _a.wrapperComponent,\n      contentComponent = _a.contentComponent;\n\n  var _b = getComponentsSizes(wrapperComponent, contentComponent, newScale),\n      wrapperWidth = _b.wrapperWidth,\n      wrapperHeight = _b.wrapperHeight,\n      newContentWidth = _b.newContentWidth,\n      newDiffWidth = _b.newDiffWidth,\n      newContentHeight = _b.newContentHeight,\n      newDiffHeight = _b.newDiffHeight;\n\n  var bounds = calculateBoundingArea(wrapperWidth, newContentWidth, newDiffWidth, wrapperHeight, newContentHeight, newDiffHeight, limitToWrapper); // Save bounds\n\n  this.bounds = bounds;\n  return bounds;\n}\n/**\r\n * Wheel zoom event\r\n */\n\n\nfunction handleWheelZoom(event) {\n  var _a = this.stateProvider,\n      scale = _a.scale,\n      contentComponent = _a.contentComponent,\n      limitToBounds = _a.options.limitToBounds,\n      _b = _a.scalePadding,\n      size = _b.size,\n      disabled = _b.disabled,\n      _c = _a.wheel,\n      step = _c.step,\n      limitsOnWheel = _c.limitsOnWheel;\n  event.preventDefault();\n  event.stopPropagation();\n  var delta = getDelta(event, null);\n  var newScale = handleCalculateZoom.call(this, delta, step, !event.ctrlKey); // if scale not change\n\n  if (scale === newScale) return;\n  var bounds = handleCalculateBounds.call(this, newScale, !limitsOnWheel);\n\n  var _d = wheelMousePosition(event, contentComponent, scale),\n      mouseX = _d.mouseX,\n      mouseY = _d.mouseY;\n\n  var isLimitedToBounds = limitToBounds && (disabled || size === 0 || limitsOnWheel);\n\n  var _e = handleCalculatePositions.call(this, mouseX, mouseY, newScale, bounds, isLimitedToBounds),\n      x = _e.x,\n      y = _e.y;\n\n  this.bounds = bounds;\n  this.stateProvider.previousScale = scale;\n  this.stateProvider.scale = newScale;\n  this.stateProvider.positionX = x;\n  this.stateProvider.positionY = y;\n  this.applyTransformation();\n}\n/**\r\n * Zoom for animations\r\n */\n\n\nfunction handleZoomToPoint(isDisabled, scale, mouseX, mouseY, event) {\n  var _a = this.stateProvider,\n      contentComponent = _a.contentComponent,\n      _b = _a.options,\n      disabled = _b.disabled,\n      minScale = _b.minScale,\n      maxScale = _b.maxScale,\n      limitToBounds = _b.limitToBounds,\n      limitToWrapper = _b.limitToWrapper;\n  if (disabled || isDisabled) return;\n  var newScale = checkZoomBounds(roundNumber(scale, 2), minScale, maxScale, null, null);\n  var bounds = handleCalculateBounds.call(this, newScale, limitToWrapper);\n  var mousePosX = mouseX;\n  var mousePosY = mouseY; // if event is present - use it's mouse position\n\n  if (event) {\n    var mousePosition = wheelMousePosition(event, contentComponent, scale);\n    mousePosX = mousePosition.mouseX;\n    mousePosY = mousePosition.mouseY;\n  }\n\n  var _c = handleCalculatePositions.call(this, mousePosX, mousePosY, newScale, bounds, limitToBounds),\n      x = _c.x,\n      y = _c.y;\n\n  return {\n    scale: newScale,\n    positionX: x,\n    positionY: y\n  };\n}\n\nfunction handlePaddingAnimation$1() {\n  var _a = this.stateProvider,\n      scale = _a.scale,\n      wrapperComponent = _a.wrapperComponent,\n      _b = _a.options,\n      minScale = _b.minScale,\n      limitToBounds = _b.limitToBounds,\n      _c = _a.scalePadding,\n      disabled = _c.disabled,\n      animationTime = _c.animationTime,\n      animationType = _c.animationType;\n  var isDisabled = disabled || scale >= minScale;\n\n  if (scale >= 1 || limitToBounds) {\n    // fire fit to bounds animation\n    handlePanningAnimation.call(this);\n  }\n\n  if (isDisabled) return;\n  var mouseX = wrapperComponent.offsetWidth / 2;\n  var mouseY = wrapperComponent.offsetHeight / 2;\n  var targetState = handleZoomToPoint.call(this, false, minScale, mouseX, mouseY, null);\n  animateComponent.call(this, {\n    targetState: targetState,\n    speed: animationTime,\n    type: animationType\n  });\n}\n/**\r\n * Button zoom events\r\n */\n\n\nfunction handleDoubleClick(event) {\n  event.preventDefault();\n  event.stopPropagation();\n  var _a = this.stateProvider,\n      contentComponent = _a.contentComponent,\n      scale = _a.scale,\n      _b = _a.doubleClick,\n      disabled = _b.disabled,\n      mode = _b.mode,\n      step = _b.step,\n      animationTime = _b.animationTime,\n      animationType = _b.animationType;\n\n  if (mode === \"reset\") {\n    return resetTransformations.call(this, event, animationTime);\n  }\n\n  var delta = mode === \"zoomOut\" ? -1 : 1;\n  var newScale = handleCalculateZoom.call(this, delta, step, undefined, undefined, true);\n\n  var _c = wheelMousePosition(event, contentComponent, scale),\n      mouseX = _c.mouseX,\n      mouseY = _c.mouseY;\n\n  var targetState = handleZoomToPoint.call(this, disabled, newScale, mouseX, mouseY);\n  if (targetState.scale === scale) return;\n  var targetScale = handleCalculateZoom.call(this, delta, step, true, undefined, true);\n  var time = getButtonAnimationTime(targetScale, newScale, animationTime);\n  animateComponent.call(this, {\n    targetState: targetState,\n    speed: time,\n    type: animationType\n  });\n}\n\nfunction handleZoomControls(customDelta, customStep) {\n  var _a = this.stateProvider,\n      scale = _a.scale,\n      positionX = _a.positionX,\n      positionY = _a.positionY,\n      wrapperComponent = _a.wrapperComponent,\n      zoomIn = _a.zoomIn,\n      zoomOut = _a.zoomOut;\n  var wrapperWidth = wrapperComponent.offsetWidth;\n  var wrapperHeight = wrapperComponent.offsetHeight;\n  var mouseX = (wrapperWidth / 2 - positionX) / scale;\n  var mouseY = (wrapperHeight / 2 - positionY) / scale;\n  var newScale = handleCalculateZoom.call(this, customDelta, customStep, undefined, undefined, true);\n  var isZoomIn = newScale > scale;\n  var animationSpeed = isZoomIn ? zoomIn.animationTime : zoomOut.animationTime;\n  var animationType = isZoomIn ? zoomIn.animationType : zoomOut.animationType;\n  var isDisabled = isZoomIn ? zoomIn.disabled : zoomOut.disabled;\n  var targetState = handleZoomToPoint.call(this, isDisabled, newScale, mouseX, mouseY);\n  if (targetState.scale === scale) return;\n  var targetScale = handleCalculateZoom.call(this, customDelta, customStep, true, undefined, true);\n  var time = getButtonAnimationTime(targetScale, newScale, animationSpeed);\n  animateComponent.call(this, {\n    targetState: targetState,\n    speed: time,\n    type: animationType\n  });\n}\n\nfunction resetTransformations(animationSpeed) {\n  var _a = this.props.defaultValues,\n      defaultScale = _a.defaultScale,\n      defaultPositionX = _a.defaultPositionX,\n      defaultPositionY = _a.defaultPositionY;\n  var _b = this.stateProvider,\n      scale = _b.scale,\n      positionX = _b.positionX,\n      positionY = _b.positionY,\n      reset = _b.reset,\n      _c = _b.options,\n      disabled = _c.disabled,\n      limitToBounds = _c.limitToBounds,\n      centerContent = _c.centerContent,\n      limitToWrapper = _c.limitToWrapper;\n  if (disabled || reset.disabled) return;\n  if (scale === defaultScale && positionX === defaultPositionX && positionY === defaultPositionY) return;\n  var speed = typeof animationSpeed === \"number\" ? animationSpeed : reset.animationTime;\n  var targetScale = checkIsNumber(defaultScale, initialState.scale);\n  var newPositionX = checkIsNumber(defaultPositionX, initialState.positionX);\n  var newPositionY = checkIsNumber(defaultPositionY, initialState.positionY);\n\n  if (limitToBounds && !limitToWrapper || centerContent) {\n    var bounds = handleCalculateBounds.call(this, targetScale, limitToWrapper);\n    newPositionX = bounds.minPositionX;\n    newPositionY = bounds.minPositionY;\n  }\n\n  var targetState = {\n    scale: targetScale,\n    positionX: newPositionX,\n    positionY: newPositionY\n  };\n  animateComponent.call(this, {\n    targetState: targetState,\n    speed: speed,\n    type: reset.animationType\n  });\n}\n\nfunction getButtonAnimationTime(targetScale, newScale, time) {\n  return time * (newScale / targetScale);\n}\n\nfunction round(number, decimal) {\n  var roundNumber = Math.pow(10, decimal);\n  return Math.round(number * roundNumber) / roundNumber;\n}\n\nfunction getCurrentDistance(event) {\n  return getDistance(event.touches[0], event.touches[1]);\n}\n\nfunction checkIfInfinite(number) {\n  return number === Infinity || number === -Infinity;\n}\n\nfunction calculatePinchZoom(currentDistance, pinchStartDistance) {\n  var _a = this.stateProvider,\n      _b = _a.options,\n      minScale = _b.minScale,\n      maxScale = _b.maxScale,\n      _c = _a.scalePadding,\n      size = _c.size,\n      disabled = _c.disabled;\n  if (typeof pinchStartDistance !== \"number\" || typeof currentDistance !== \"number\") return console.error(\"Pinch touches distance was not provided\");\n  if (currentDistance < 0) return;\n  var touchProportion = currentDistance / pinchStartDistance;\n  var scaleDifference = touchProportion * this.pinchStartScale;\n  return checkZoomBounds(roundNumber(scaleDifference, 2), minScale, maxScale, size, !disabled);\n}\n\nfunction calculateMidpoint(event, scale, contentComponent) {\n  var contentRect = contentComponent.getBoundingClientRect();\n  var touches = event.touches;\n  var firstPointX = round(touches[0].clientX - contentRect.left, 5);\n  var firstPointY = round(touches[0].clientY - contentRect.top, 5);\n  var secondPointX = round(touches[1].clientX - contentRect.left, 5);\n  var secondPointY = round(touches[1].clientY - contentRect.top, 5);\n  return {\n    mouseX: (firstPointX + secondPointX) / 2 / scale,\n    mouseY: (firstPointY + secondPointY) / 2 / scale\n  };\n}\n\nfunction handleZoomPinch(event) {\n  var _a = this.stateProvider,\n      scale = _a.scale,\n      _b = _a.options,\n      limitToBounds = _b.limitToBounds,\n      limitToWrapper = _b.limitToWrapper,\n      _c = _a.scalePadding,\n      disabled = _c.disabled,\n      size = _c.size,\n      limitsOnWheel = _a.wheel.limitsOnWheel,\n      pinch = _a.pinch;\n  var contentComponent = this.state.contentComponent;\n  if (pinch.disabled || this.stateProvider.options.disabled) return;\n\n  if (event.cancelable) {\n    event.preventDefault();\n    event.stopPropagation();\n  } // if one finger starts from outside of wrapper\n\n\n  if (this.pinchStartDistance === null) return; // Position transformation\n\n  var _d = calculateMidpoint(event, scale, contentComponent),\n      mouseX = _d.mouseX,\n      mouseY = _d.mouseY; // if touches goes off of the wrapper element\n\n\n  if (checkIfInfinite(mouseX) || checkIfInfinite(mouseY)) return;\n  var currentDistance = getCurrentDistance(event);\n  var newScale = calculatePinchZoom.call(this, currentDistance, this.pinchStartDistance);\n  if (checkIfInfinite(newScale) || newScale === scale) return; // Get new element sizes to calculate bounds\n\n  var bounds = handleCalculateBounds.call(this, newScale, limitToWrapper); // Calculate transformations\n\n  var isLimitedToBounds = limitToBounds && (disabled || size === 0 || limitsOnWheel);\n\n  var _e = handleCalculatePositions.call(this, mouseX, mouseY, newScale, bounds, isLimitedToBounds),\n      x = _e.x,\n      y = _e.y;\n\n  this.lastDistance = currentDistance;\n  this.stateProvider.positionX = x;\n  this.stateProvider.positionY = y;\n  this.stateProvider.scale = newScale;\n  this.stateProvider.previousScale = scale; // update component transformation\n\n  this.applyTransformation();\n}\n\nvar throttleTime = 30;\n\nfunction velocityTimeSpeed(speed, animationTime) {\n  var velocityEqualToMove = this.stateProvider.pan.velocityEqualToMove;\n\n  if (velocityEqualToMove) {\n    return animationTime - animationTime / Math.max(1, speed);\n  }\n\n  return animationTime;\n}\n\nfunction handleEnableVelocity() {\n  this.setState({\n    startAnimation: false\n  });\n}\n\nfunction handleFireVelocity() {\n  this.setState({\n    startAnimation: true\n  });\n}\n\nfunction animateVelocity() {\n  var _this = this;\n\n  var _a = this.stateProvider,\n      positionX = _a.positionX,\n      positionY = _a.positionY,\n      limitToBounds = _a.options.limitToBounds,\n      _b = _a.pan,\n      velocityBaseTime = _b.velocityBaseTime,\n      lockAxisX = _b.lockAxisX,\n      lockAxisY = _b.lockAxisY,\n      velocityAnimationType = _b.velocityAnimationType,\n      panReturnAnimationTime = _b.panReturnAnimationTime,\n      panReturnAnimationType = _b.panReturnAnimationType,\n      padding = _b.padding,\n      paddingSize = _b.paddingSize,\n      wrapperComponent = _a.wrapperComponent;\n  if (!this.mounted) return;\n  if (!this.velocity || !this.bounds) return handleDisableAnimation.call(this);\n  var _c = this.bounds,\n      maxPositionX = _c.maxPositionX,\n      minPositionX = _c.minPositionX,\n      maxPositionY = _c.maxPositionY,\n      minPositionY = _c.minPositionY;\n  var _d = this.velocity,\n      velocityX = _d.velocityX,\n      velocityY = _d.velocityY,\n      velocity = _d.velocity;\n  var animationTime = velocityTimeSpeed.call(this, velocity, velocityBaseTime);\n\n  if (!animationTime) {\n    handlePanningAnimation.call(this);\n    return;\n  }\n\n  var targetX = velocityX;\n  var targetY = velocityY; // pan return animation\n\n  var newAnimationTime = animationTime > panReturnAnimationTime ? animationTime : panReturnAnimationTime;\n  var paddingValue = padding ? paddingSize : 0;\n  var paddingX = wrapperComponent ? paddingValue * wrapperComponent.offsetWidth / 100 : 0;\n  var paddingY = wrapperComponent ? paddingValue * wrapperComponent.offsetHeight / 100 : 0;\n  var maxTargetX = maxPositionX + paddingX;\n  var minTargetX = minPositionX - paddingX;\n  var maxTargetY = maxPositionY + paddingY;\n  var minTargetY = minPositionY - paddingY;\n  var startPosition = checkPositionBounds(positionX, positionY, this.bounds, limitToBounds, paddingValue, wrapperComponent);\n  var startTime = new Date().getTime(); // animation start timestamp\n\n  animate.call(this, velocityAnimationType, newAnimationTime, function (step) {\n    var frameTime = new Date().getTime() - startTime;\n    var animationProgress = frameTime / panReturnAnimationTime;\n    var returnAnimation = availableAnimations[panReturnAnimationType];\n    var customReturnStep = returnAnimation(animationProgress);\n    if (frameTime > panReturnAnimationTime || customReturnStep > 1 || customReturnStep === Infinity || customReturnStep === -Infinity) customReturnStep = 1;\n    var currentPositionX = getPosition(lockAxisX, targetX, step, customReturnStep, minPositionX, maxPositionX, limitToBounds, positionX, startPosition.x, minTargetX, maxTargetX);\n    var currentPositionY = getPosition(lockAxisY, targetY, step, customReturnStep, minPositionY, maxPositionY, limitToBounds, positionY, startPosition.y, minTargetY, maxTargetY);\n\n    if (positionX !== currentPositionX || positionY !== currentPositionY) {\n      // Save panned position\n      _this.stateProvider.positionX = currentPositionX;\n      _this.stateProvider.positionY = currentPositionY; // apply animation changes\n\n      _this.applyTransformation();\n    }\n  });\n}\n\nfunction calculateVelocityStart(event) {\n  var _this = this;\n\n  var _a = this.stateProvider,\n      scale = _a.scale,\n      disabled = _a.options.disabled,\n      _b = _a.pan,\n      velocity = _b.velocity,\n      velocitySensitivity = _b.velocitySensitivity,\n      velocityActiveScale = _b.velocityActiveScale,\n      velocityMinSpeed = _b.velocityMinSpeed,\n      wrapperComponent = _a.wrapperComponent;\n  if (!velocity || velocityActiveScale >= scale || disabled) return;\n  handleEnableVelocity.call(this);\n  var now = Date.now();\n\n  if (this.lastMousePosition) {\n    var position_1 = getClientPosition(event);\n    if (!position_1) return console.error(\"No mouse or touch position detected\");\n    var clientX = position_1.clientX,\n        clientY = position_1.clientY;\n    var distanceX = clientX - this.lastMousePosition.clientX;\n    var distanceY = clientY - this.lastMousePosition.clientY;\n    var interval = now - this.velocityTime;\n    var wrapperToWindowScaleX = 2 - wrapperComponent.offsetWidth / window.innerWidth;\n    var wrapperToWindowScaleY = 2 - wrapperComponent.offsetHeight / window.innerHeight;\n    var scaledX = 20 * Math.max(velocityMinSpeed, Math.min(2, wrapperToWindowScaleX));\n    var scaledY = 20 * Math.max(velocityMinSpeed, Math.min(2, wrapperToWindowScaleY));\n    var velocityX = distanceX / interval * velocitySensitivity * scale * scaledX;\n    var velocityY = distanceY / interval * velocitySensitivity * scale * scaledY;\n    var speed = distanceX * distanceX + distanceY * distanceY;\n    var velocity_1 = Math.sqrt(speed) / interval * velocitySensitivity;\n    if (this.velocity && velocity_1 < this.velocity.velocity && this.throttle) return;\n    this.velocity = {\n      velocityX: velocityX,\n      velocityY: velocityY,\n      velocity: velocity_1\n    }; // throttling\n\n    if (this.throttle) clearTimeout(this.throttle);\n    this.throttle = setTimeout(function () {\n      if (_this.mounted) _this.throttle = false;\n    }, throttleTime);\n  }\n\n  var position = getClientPosition(event);\n  this.lastMousePosition = position;\n  this.velocityTime = now;\n}\n\nfunction getPosition(isLocked, target, step, panReturnStep, minBound, maxBound, limitToBounds, offset, startPosition, minTarget, maxTarget) {\n  if (limitToBounds) {\n    if (startPosition > minBound && offset > maxBound) {\n      var newPosition = startPosition - (startPosition - maxBound) * panReturnStep;\n      if (newPosition > maxTarget) return maxTarget;\n      if (newPosition < maxBound) return maxBound;\n      return newPosition;\n    }\n\n    if (startPosition < minBound && offset < minBound) {\n      var newPosition = startPosition - (startPosition - minBound) * panReturnStep;\n      if (newPosition < minTarget) return minTarget;\n      if (newPosition > minBound) return minBound;\n      return newPosition;\n    }\n  }\n\n  if (isLocked) return startPosition;\n  var offsetPosition = offset + target * step;\n  return boundLimiter(offsetPosition, minBound, maxBound, limitToBounds);\n} // We want to make event listeners non-passive, and to do so have to check\n\n\nfunction makePassiveEventOption(passive) {\n  return passive;\n}\n\nvar propsList = [\"previousScale\", \"scale\", \"positionX\", \"positionY\", \"defaultPositionX\", \"defaultPositionY\", \"defaultScale\", \"onWheelStart\", \"onWheel\", \"onWheelStop\", \"onPanningStart\", \"onPanning\", \"onPanningStop\", \"onPinchingStart\", \"onPinching\", \"onPinchingStop\", \"onZoomChange\", \"options\", \"wheel\", \"scalePadding\", \"pan\", \"pinch\", \"zoomIn\", \"zoomOut\", \"doubleClick\", \"reset\"];\n\nvar getValidPropsFromObject = function getValidPropsFromObject(props) {\n  return Object.keys(props).reduce(function (acc, key) {\n    if (propsList.includes(key)) {\n      acc[key] = props[key];\n    }\n\n    return acc;\n  }, {});\n};\n\nvar Context = React.createContext({});\nvar wheelStopEventTimer = null;\nvar wheelStopEventTime = 180;\nvar wheelAnimationTimer = null;\nvar wheelAnimationTime = 100;\n\nvar StateProvider =\n/** @class */\nfunction (_super) {\n  __extends(StateProvider, _super);\n\n  function StateProvider() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.mounted = true;\n    _this.state = {\n      wrapperComponent: undefined,\n      contentComponent: undefined\n    };\n    _this.stateProvider = _assign(_assign(_assign(_assign({}, initialState), mergeProps(initialState, _this.props.dynamicValues)), _this.props.defaultValues), {\n      previousScale: _this.props.dynamicValues.scale || _this.props.defaultValues.scale || initialState.scale\n    });\n    _this.windowToWrapperScaleX = 0;\n    _this.windowToWrapperScaleY = 0; // panning helpers\n\n    _this.startCoords = null;\n    _this.isDown = false; // pinch helpers\n\n    _this.pinchStartDistance = null;\n    _this.lastDistance = null;\n    _this.pinchStartScale = null;\n    _this.distance = null;\n    _this.bounds = null; // velocity helpers\n\n    _this.velocityTime = null;\n    _this.lastMousePosition = null;\n    _this.velocity = null;\n    _this.offsetX = null;\n    _this.offsetY = null;\n    _this.throttle = false; // wheel helpers\n\n    _this.previousWheelEvent = null;\n    _this.lastScale = null; // animations helpers\n\n    _this.animate = null;\n    _this.animation = null;\n    _this.maxBounds = null; //////////\n    // Wheel\n    //////////\n\n    _this.handleWheel = function (event) {\n      var _a = _this.stateProvider,\n          scale = _a.scale,\n          _b = _a.wheel,\n          disabled = _b.disabled,\n          wheelEnabled = _b.wheelEnabled,\n          touchPadEnabled = _b.touchPadEnabled;\n      var _c = _this.props,\n          onWheelStart = _c.onWheelStart,\n          onWheel = _c.onWheel,\n          onWheelStop = _c.onWheelStop;\n      var _d = _this.state,\n          wrapperComponent = _d.wrapperComponent,\n          contentComponent = _d.contentComponent;\n      if (_this.isDown || disabled || _this.stateProvider.options.disabled || !wrapperComponent || !contentComponent) return; // ctrlKey detects if touchpad execute wheel or pinch gesture\n\n      if (!wheelEnabled && !event.ctrlKey) return;\n      if (!touchPadEnabled && event.ctrlKey) return; // Wheel start event\n\n      if (!wheelStopEventTimer) {\n        _this.lastScale = scale;\n        handleDisableAnimation.call(_this);\n        handleCallback(onWheelStart, _this.getCallbackProps());\n      } // Wheel event\n\n\n      handleWheelZoom.call(_this, event);\n      handleCallback(onWheel, _this.getCallbackProps());\n\n      _this.applyTransformation(null, null, null);\n\n      _this.previousWheelEvent = event; // Wheel stop event\n\n      if (handleWheelStop(_this.previousWheelEvent, event, _this.stateProvider)) {\n        clearTimeout(wheelStopEventTimer);\n        wheelStopEventTimer = setTimeout(function () {\n          if (!_this.mounted) return;\n          handleCallback(onWheelStop, _this.getCallbackProps());\n          wheelStopEventTimer = null;\n        }, wheelStopEventTime);\n      } // cancel animation\n\n\n      _this.animate = false; // fire animation\n\n      _this.lastScale = _this.stateProvider.scale;\n      clearTimeout(wheelAnimationTimer);\n      wheelAnimationTimer = setTimeout(function () {\n        if (!_this.mounted) return;\n        handlePaddingAnimation$1.call(_this, event);\n      }, wheelAnimationTime);\n    }; //////////\n    // Panning\n    //////////\n\n\n    _this.checkPanningTarget = function (event) {\n      var disableOnTarget = _this.stateProvider.pan.disableOnTarget;\n      return disableOnTarget.map(function (tag) {\n        return tag.toUpperCase();\n      }).includes(event.target.tagName) || disableOnTarget.find(function (element) {\n        return event.target.classList.value.includes(element);\n      });\n    };\n\n    _this.checkIsPanningActive = function (event) {\n      var disabled = _this.stateProvider.pan.disabled;\n      var _a = _this.state,\n          wrapperComponent = _a.wrapperComponent,\n          contentComponent = _a.contentComponent;\n      return !_this.isDown || disabled || _this.stateProvider.options.disabled || event.touches && (event.touches.length !== 1 || Math.abs(_this.startCoords.x - event.touches[0].clientX) < 1 || Math.abs(_this.startCoords.y - event.touches[0].clientY) < 1) || !wrapperComponent || !contentComponent;\n    };\n\n    _this.handleSetUpPanning = function (x, y) {\n      var _a = _this.stateProvider,\n          positionX = _a.positionX,\n          positionY = _a.positionY;\n      _this.isDown = true;\n      _this.startCoords = {\n        x: x - positionX,\n        y: y - positionY\n      };\n      handleCallback(_this.props.onPanningStart, _this.getCallbackProps());\n    };\n\n    _this.handleStartPanning = function (event) {\n      var _a = _this.stateProvider,\n          wrapperComponent = _a.wrapperComponent,\n          scale = _a.scale,\n          _b = _a.options,\n          minScale = _b.minScale,\n          maxScale = _b.maxScale,\n          limitToWrapper = _b.limitToWrapper,\n          disabled = _a.pan.disabled;\n      var target = event.target,\n          touches = event.touches;\n      if (disabled || _this.stateProvider.options.disabled || wrapperComponent && !wrapperComponent.contains(target) || _this.checkPanningTarget(event) || scale < minScale || scale > maxScale) return;\n      handleDisableAnimation.call(_this);\n      _this.bounds = handleCalculateBounds.call(_this, scale, limitToWrapper); // Mobile points\n\n      if (touches && touches.length === 1) {\n        _this.handleSetUpPanning(touches[0].clientX, touches[0].clientY);\n      } // Desktop points\n\n\n      if (!touches) {\n        _this.handleSetUpPanning(event.clientX, event.clientY);\n      }\n    };\n\n    _this.handlePanning = function (event) {\n      if (_this.isDown) event.preventDefault();\n      if (_this.checkIsPanningActive(event)) return;\n      event.stopPropagation();\n      calculateVelocityStart.call(_this, event);\n      handlePanning.call(_this, event);\n      handleCallback(_this.props.onPanning, _this.getCallbackProps());\n    };\n\n    _this.handleStopPanning = function () {\n      if (_this.isDown) {\n        _this.isDown = false;\n        _this.animate = false;\n        _this.animation = false;\n        handleFireVelocity.call(_this);\n        handleCallback(_this.props.onPanningStop, _this.getCallbackProps());\n        var _a = _this.stateProvider,\n            velocity = _a.pan.velocity,\n            scale = _a.scale; // start velocity animation\n\n        if (_this.velocity && velocity && scale > 1) {\n          animateVelocity.call(_this);\n        } else {\n          // fire fit to bounds animation\n          handlePanningAnimation.call(_this);\n        }\n      }\n    }; //////////\n    // Pinch\n    //////////\n\n\n    _this.handlePinchStart = function (event) {\n      var scale = _this.stateProvider.scale;\n      event.preventDefault();\n      event.stopPropagation();\n      handleDisableAnimation.call(_this);\n      var distance = getDistance(event.touches[0], event.touches[1]);\n      _this.pinchStartDistance = distance;\n      _this.lastDistance = distance;\n      _this.pinchStartScale = scale;\n      _this.isDown = false;\n      handleCallback(_this.props.onPinchingStart, _this.getCallbackProps());\n    };\n\n    _this.handlePinch = function (event) {\n      _this.isDown = false;\n      handleZoomPinch.call(_this, event);\n      handleCallback(_this.props.onPinching, _this.getCallbackProps());\n    };\n\n    _this.handlePinchStop = function () {\n      if (typeof _this.pinchStartScale === \"number\") {\n        _this.isDown = false;\n        _this.velocity = null;\n        _this.lastDistance = null;\n        _this.pinchStartScale = null;\n        _this.pinchStartDistance = null;\n        handlePaddingAnimation$1.call(_this);\n        handleCallback(_this.props.onPinchingStop, _this.getCallbackProps());\n      }\n    }; //////////\n    // Touch Events\n    //////////\n\n\n    _this.handleTouchStart = function (event) {\n      var _a = _this.stateProvider,\n          wrapperComponent = _a.wrapperComponent,\n          contentComponent = _a.contentComponent,\n          scale = _a.scale,\n          _b = _a.options,\n          disabled = _b.disabled,\n          minScale = _b.minScale;\n      var touches = event.touches;\n      if (disabled || !wrapperComponent || !contentComponent || scale < minScale) return;\n      handleDisableAnimation.call(_this);\n      if (touches && touches.length === 1) return _this.handleStartPanning(event);\n      if (touches && touches.length === 2) return _this.handlePinchStart(event);\n    };\n\n    _this.handleTouch = function (event) {\n      var _a = _this.stateProvider,\n          pan = _a.pan,\n          pinch = _a.pinch,\n          options = _a.options;\n      if (options.disabled) return;\n      if (!pan.disabled && event.touches.length === 1) return _this.handlePanning(event);\n      if (!pinch.disabled && event.touches.length === 2) return _this.handlePinch(event);\n    };\n\n    _this.handleTouchStop = function () {\n      _this.handleStopPanning();\n\n      _this.handlePinchStop();\n    }; //////////\n    // Controls\n    //////////\n\n\n    _this.zoomIn = function (event) {\n      var _a = _this.stateProvider,\n          _b = _a.zoomIn,\n          disabled = _b.disabled,\n          step = _b.step,\n          options = _a.options;\n      var _c = _this.state,\n          wrapperComponent = _c.wrapperComponent,\n          contentComponent = _c.contentComponent;\n      if (!event) throw Error(\"Zoom in function requires event prop\");\n      if (disabled || options.disabled || !wrapperComponent || !contentComponent) return;\n      handleZoomControls.call(_this, 1, step);\n    };\n\n    _this.zoomOut = function (event) {\n      var _a = _this.stateProvider,\n          _b = _a.zoomOut,\n          disabled = _b.disabled,\n          step = _b.step,\n          options = _a.options;\n      var _c = _this.state,\n          wrapperComponent = _c.wrapperComponent,\n          contentComponent = _c.contentComponent;\n      if (!event) throw Error(\"Zoom out function requires event prop\");\n      if (disabled || options.disabled || !wrapperComponent || !contentComponent) return;\n      handleZoomControls.call(_this, -1, step);\n    };\n\n    _this.handleDbClick = function (event) {\n      var _a = _this.stateProvider,\n          options = _a.options,\n          _b = _a.doubleClick,\n          disabled = _b.disabled,\n          step = _b.step;\n      var _c = _this.state,\n          wrapperComponent = _c.wrapperComponent,\n          contentComponent = _c.contentComponent;\n      if (!event) throw Error(\"Double click function requires event prop\");\n      if (disabled || options.disabled || !wrapperComponent || !contentComponent) return;\n      handleDoubleClick.call(_this, event, 1, step);\n    };\n\n    _this.setScale = function (newScale, speed, type) {\n      if (speed === void 0) {\n        speed = 200;\n      }\n\n      if (type === void 0) {\n        type = \"easeOut\";\n      }\n\n      var _a = _this.stateProvider,\n          positionX = _a.positionX,\n          positionY = _a.positionY,\n          scale = _a.scale,\n          disabled = _a.options.disabled;\n      var _b = _this.state,\n          wrapperComponent = _b.wrapperComponent,\n          contentComponent = _b.contentComponent;\n      if (disabled || !wrapperComponent || !contentComponent) return;\n      var targetState = {\n        positionX: positionX,\n        positionY: positionY,\n        scale: isNaN(newScale) ? scale : newScale\n      };\n      animateComponent.call(_this, {\n        targetState: targetState,\n        speed: speed,\n        type: type\n      });\n    };\n\n    _this.setPositionX = function (newPosX, speed, type) {\n      if (speed === void 0) {\n        speed = 200;\n      }\n\n      if (type === void 0) {\n        type = \"easeOut\";\n      }\n\n      var _a = _this.stateProvider,\n          positionX = _a.positionX,\n          positionY = _a.positionY,\n          scale = _a.scale,\n          _b = _a.options,\n          disabled = _b.disabled,\n          transformEnabled = _b.transformEnabled;\n      var _c = _this.state,\n          wrapperComponent = _c.wrapperComponent,\n          contentComponent = _c.contentComponent;\n      if (disabled || !transformEnabled || !wrapperComponent || !contentComponent) return;\n      var targetState = {\n        positionX: isNaN(newPosX) ? positionX : newPosX,\n        positionY: positionY,\n        scale: scale\n      };\n      animateComponent.call(_this, {\n        targetState: targetState,\n        speed: speed,\n        type: type\n      });\n    };\n\n    _this.setPositionY = function (newPosY, speed, type) {\n      if (speed === void 0) {\n        speed = 200;\n      }\n\n      if (type === void 0) {\n        type = \"easeOut\";\n      }\n\n      var _a = _this.stateProvider,\n          positionX = _a.positionX,\n          scale = _a.scale,\n          positionY = _a.positionY,\n          _b = _a.options,\n          disabled = _b.disabled,\n          transformEnabled = _b.transformEnabled;\n      var _c = _this.state,\n          wrapperComponent = _c.wrapperComponent,\n          contentComponent = _c.contentComponent;\n      if (disabled || !transformEnabled || !wrapperComponent || !contentComponent) return;\n      var targetState = {\n        positionX: positionX,\n        positionY: isNaN(newPosY) ? positionY : newPosY,\n        scale: scale\n      };\n      animateComponent.call(_this, {\n        targetState: targetState,\n        speed: speed,\n        type: type\n      });\n    };\n\n    _this.setTransform = function (newPosX, newPosY, newScale, speed, type) {\n      if (speed === void 0) {\n        speed = 200;\n      }\n\n      if (type === void 0) {\n        type = \"easeOut\";\n      }\n\n      var _a = _this.stateProvider,\n          positionX = _a.positionX,\n          positionY = _a.positionY,\n          scale = _a.scale,\n          _b = _a.options,\n          disabled = _b.disabled,\n          transformEnabled = _b.transformEnabled;\n      var _c = _this.state,\n          wrapperComponent = _c.wrapperComponent,\n          contentComponent = _c.contentComponent;\n      if (disabled || !transformEnabled || !wrapperComponent || !contentComponent) return;\n      var targetState = {\n        positionX: isNaN(newPosX) ? positionX : newPosX,\n        positionY: isNaN(newPosY) ? positionY : newPosY,\n        scale: isNaN(newScale) ? scale : newScale\n      };\n      animateComponent.call(_this, {\n        targetState: targetState,\n        speed: speed,\n        type: type\n      });\n    };\n\n    _this.resetTransform = function () {\n      var _a = _this.stateProvider.options,\n          disabled = _a.disabled,\n          transformEnabled = _a.transformEnabled;\n      if (disabled || !transformEnabled) return;\n      resetTransformations.call(_this);\n    };\n\n    _this.setDefaultState = function () {\n      _this.animation = null;\n      _this.stateProvider = _assign(_assign(_assign({}, _this.stateProvider), {\n        scale: initialState.scale,\n        positionX: initialState.positionX,\n        positionY: initialState.positionY\n      }), _this.props.defaultValues);\n\n      _this.forceUpdate();\n    }; //////////\n    // Setters\n    //////////\n\n\n    _this.setWrapperComponent = function (wrapperComponent) {\n      _this.setState({\n        wrapperComponent: wrapperComponent\n      });\n    };\n\n    _this.setContentComponent = function (contentComponent) {\n      _this.setState({\n        contentComponent: contentComponent\n      }, function () {\n        var _a = _this.stateProvider,\n            wrapperComponent = _a.wrapperComponent,\n            _b = _a.options,\n            centerContent = _b.centerContent,\n            limitToBounds = _b.limitToBounds,\n            limitToWrapper = _b.limitToWrapper,\n            scale = _a.scale;\n        var _c = _this.props.defaultValues,\n            positionX = _c.positionX,\n            positionY = _c.positionY;\n\n        if (limitToBounds && !limitToWrapper || centerContent && !positionX && !positionY) {\n          var transform = \"translate(25%, 25%) scale(\" + scale + \")\";\n          contentComponent.style.transform = transform;\n          contentComponent.style.WebkitTransform = transform; // force update to inject state to the context\n\n          _this.forceUpdate();\n\n          var startTime_1 = new Date().getTime();\n          var maxTimeWait_1 = 2000;\n          var interval_1 = setInterval(function () {\n            if (wrapperComponent.offsetWidth) {\n              var bounds = handleCalculateBounds.call(_this, scale, false);\n              _this.stateProvider.positionX = bounds.minPositionX;\n              _this.stateProvider.positionY = bounds.minPositionY;\n\n              _this.applyTransformation(null, null, null);\n\n              clearInterval(interval_1);\n              interval_1 = null;\n            } else if (new Date().getTime() - startTime_1 > maxTimeWait_1) {\n              clearInterval(interval_1);\n              interval_1 = null;\n            }\n          }, 20);\n        } else {\n          _this.applyTransformation(null, null, null);\n        }\n      });\n    };\n\n    _this.applyTransformation = function (newScale, posX, posY) {\n      if (!_this.mounted) return;\n      var contentComponent = _this.state.contentComponent;\n      var onZoomChange = _this.props.onZoomChange;\n      var _a = _this.stateProvider,\n          previousScale = _a.previousScale,\n          scale = _a.scale,\n          positionX = _a.positionX,\n          positionY = _a.positionY;\n      if (!contentComponent) return console.error(\"There is no content component\");\n      var transform = \"translate(\" + (posX || positionX) + \"px, \" + (posY || positionY) + \"px) scale(\" + (newScale || scale) + \")\";\n      contentComponent.style.transform = transform;\n      contentComponent.style.WebkitTransform = transform; // force update to inject state to the context\n\n      _this.forceUpdate();\n\n      if (onZoomChange && previousScale !== scale) {\n        handleCallback(onZoomChange, _this.getCallbackProps());\n      }\n    }; //////////\n    // Props\n    //////////\n\n\n    _this.getCallbackProps = function () {\n      return getValidPropsFromObject(_this.stateProvider);\n    };\n\n    return _this;\n  }\n\n  StateProvider.prototype.componentDidMount = function () {\n    var passiveOption = makePassiveEventOption(false); // Panning on window to allow panning when mouse is out of wrapper\n\n    window.addEventListener(\"mousedown\", this.handleStartPanning, passiveOption);\n    window.addEventListener(\"mousemove\", this.handlePanning, passiveOption);\n    window.addEventListener(\"mouseup\", this.handleStopPanning, passiveOption);\n  };\n\n  StateProvider.prototype.componentWillUnmount = function () {\n    var passiveOption = makePassiveEventOption(false);\n    window.removeEventListener(\"mousedown\", this.handleStartPanning, passiveOption);\n    window.removeEventListener(\"mousemove\", this.handlePanning, passiveOption);\n    window.removeEventListener(\"mouseup\", this.handleStopPanning, passiveOption);\n    handleDisableAnimation.call(this);\n  };\n\n  StateProvider.prototype.componentDidUpdate = function (oldProps, oldState) {\n    var _a = this.state,\n        wrapperComponent = _a.wrapperComponent,\n        contentComponent = _a.contentComponent;\n    var dynamicValues = this.props.dynamicValues;\n\n    if (!oldState.contentComponent && contentComponent) {\n      this.stateProvider.contentComponent = contentComponent;\n    }\n\n    if (!oldState.wrapperComponent && wrapperComponent && wrapperComponent !== undefined) {\n      this.stateProvider.wrapperComponent = wrapperComponent;\n      this.windowToWrapperScaleX = getWindowScaleX(wrapperComponent);\n      this.windowToWrapperScaleY = getWindowScaleY(wrapperComponent); // Zooming events on wrapper\n\n      var passiveOption = makePassiveEventOption(false);\n      wrapperComponent.addEventListener(\"wheel\", this.handleWheel, passiveOption);\n      wrapperComponent.addEventListener(\"dblclick\", this.handleDbClick, passiveOption);\n      wrapperComponent.addEventListener(\"touchstart\", this.handleTouchStart, passiveOption);\n      wrapperComponent.addEventListener(\"touchmove\", this.handleTouch, passiveOption);\n      wrapperComponent.addEventListener(\"touchend\", this.handleTouchStop, passiveOption);\n    } // set bound for animations\n\n\n    if (wrapperComponent && contentComponent || oldProps.dynamicValues !== dynamicValues) {\n      this.maxBounds = handleCalculateBounds.call(this, this.stateProvider.scale, this.stateProvider.options.limitToWrapper);\n    } // must be at the end of the update function, updates\n\n\n    if (oldProps.dynamicValues && oldProps.dynamicValues !== dynamicValues) {\n      this.animation = null;\n      this.stateProvider = _assign(_assign({}, this.stateProvider), mergeProps(this.stateProvider, dynamicValues));\n      this.applyTransformation(null, null, null);\n    }\n  };\n\n  StateProvider.prototype.render = function () {\n    var _a = this.state,\n        wrapperComponent = _a.wrapperComponent,\n        contentComponent = _a.contentComponent;\n    /**\r\n     * Context provider value\r\n     */\n\n    var value = {\n      loaded: Boolean(wrapperComponent && contentComponent),\n      state: this.getCallbackProps(),\n      dispatch: {\n        setScale: this.setScale,\n        setPositionX: this.setPositionX,\n        setPositionY: this.setPositionY,\n        zoomIn: this.zoomIn,\n        zoomOut: this.zoomOut,\n        setTransform: this.setTransform,\n        resetTransform: this.resetTransform,\n        setDefaultState: this.setDefaultState\n      },\n      nodes: {\n        setWrapperComponent: this.setWrapperComponent,\n        setContentComponent: this.setContentComponent\n      }\n    };\n    var children = this.props.children;\n    var content = typeof children === \"function\" ? children(_assign(_assign({}, value.state), value.dispatch)) : children;\n    return React.createElement(Context.Provider, {\n      value: value\n    }, content);\n  };\n\n  return StateProvider;\n}(Component);\n\nvar TransformWrapper = function TransformWrapper(_a) {\n  var children = _a.children,\n      defaultPositionX = _a.defaultPositionX,\n      defaultPositionY = _a.defaultPositionY,\n      defaultScale = _a.defaultScale,\n      onWheelStart = _a.onWheelStart,\n      onWheel = _a.onWheel,\n      onWheelStop = _a.onWheelStop,\n      onPanningStart = _a.onPanningStart,\n      onPanning = _a.onPanning,\n      onPanningStop = _a.onPanningStop,\n      onPinchingStart = _a.onPinchingStart,\n      onPinching = _a.onPinching,\n      onPinchingStop = _a.onPinchingStop,\n      onZoomChange = _a.onZoomChange,\n      rest = __rest(_a, [\"children\", \"defaultPositionX\", \"defaultPositionY\", \"defaultScale\", \"onWheelStart\", \"onWheel\", \"onWheelStop\", \"onPanningStart\", \"onPanning\", \"onPanningStop\", \"onPinchingStart\", \"onPinching\", \"onPinchingStop\", \"onZoomChange\"]);\n\n  var props = _assign({}, rest);\n\n  if (props.options && props.options.limitToWrapper) {\n    props.options.limitToBounds = true;\n  }\n\n  return React.createElement(StateProvider, {\n    defaultValues: deleteUndefinedProps({\n      positionX: defaultPositionX,\n      positionY: defaultPositionY,\n      scale: defaultScale\n    }),\n    dynamicValues: deleteUndefinedProps(getValidPropsFromObject(props)),\n    onWheelStart: onWheelStart,\n    onWheel: onWheel,\n    onWheelStop: onWheelStop,\n    onPanningStart: onPanningStart,\n    onPanning: onPanning,\n    onPanningStop: onPanningStop,\n    onPinchingStart: onPinchingStart,\n    onPinching: onPinching,\n    onPinchingStop: onPinchingStop,\n    onZoomChange: onZoomChange\n  }, children);\n};\n\nfunction styleInject(css, ref) {\n  if (ref === void 0) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') {\n    return;\n  }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar css = \".TransformComponent-module_container__3NwNd {\\n  position: relative;\\n  width: fit-content;\\n  height: fit-content;\\n  overflow: hidden;\\n  -webkit-touch-callout: none; /* iOS Safari */\\n  -webkit-user-select: none; /* Safari */\\n  -khtml-user-select: none; /* Konqueror HTML */\\n  -moz-user-select: none; /* Firefox */\\n  -ms-user-select: none; /* Internet Explorer/Edge */\\n  user-select: none;\\n  margin: 0;\\n  padding: 0;\\n}\\n.TransformComponent-module_content__TZU5O {\\n  display: flex;\\n  flex-wrap: wrap;\\n  width: fit-content;\\n  height: fit-content;\\n  margin: 0;\\n  padding: 0;\\n  transform-origin: 0% 0%;\\n}\\n.TransformComponent-module_content__TZU5O img {\\n  pointer-events: none;\\n}\\n\";\nvar styles = {\n  \"container\": \"TransformComponent-module_container__3NwNd\",\n  \"content\": \"TransformComponent-module_content__TZU5O\"\n};\nstyleInject(css);\n\nvar TransformComponent =\n/** @class */\nfunction (_super) {\n  __extends(TransformComponent, _super);\n\n  function TransformComponent() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.wrapperRef = React.createRef();\n    _this.contentRef = React.createRef();\n    return _this;\n  }\n\n  TransformComponent.prototype.componentDidMount = function () {\n    var nodes = this.context.nodes;\n    nodes.setWrapperComponent(this.wrapperRef.current);\n    nodes.setContentComponent(this.contentRef.current);\n  };\n\n  TransformComponent.prototype.render = function () {\n    var children = this.props.children;\n    var _a = this.context.state,\n        positionX = _a.positionX,\n        positionY = _a.positionY,\n        scale = _a.scale,\n        _b = _a.options,\n        wrapperClass = _b.wrapperClass,\n        contentClass = _b.contentClass;\n    var style = {\n      WebkitTransform: \"translate(\" + positionX + \"px, \" + positionY + \"px) scale(\" + scale + \")\",\n      transform: \"translate(\" + positionX + \"px, \" + positionY + \"px) scale(\" + scale + \")\"\n    };\n    return React.createElement(\"div\", {\n      ref: this.wrapperRef,\n      className: \"react-transform-component \" + styles.container + \" \" + wrapperClass\n    }, React.createElement(\"div\", {\n      ref: this.contentRef,\n      className: \"react-transform-element \" + styles.content + \" \" + contentClass,\n      style: style\n    }, children));\n  };\n\n  return TransformComponent;\n}(React.Component);\n\nTransformComponent.contextType = Context;\nexport { TransformComponent, TransformWrapper };","import { useState, useLayoutEffect } from 'react'\n\nfunction getWindowDimensions() {\n  let width =  null, height = null\n  if (typeof window !== 'undefined') {\n    width = window.innerWidth\n    height = window.innerHeight\n  }\n  const orientation = height > width ? 'portrait' : 'landscape'\n  return {\n    width,\n    height,\n    orientation\n  }\n}\n\nexport default function useWindowDimensions() {\n  const [windowDimensions, setWindowDimensions] = useState(\n    {width: 0, height: 0, orientation: 'landscape'}\n  )\n\n  useLayoutEffect(() => {\n    function handleResize() {\n      setWindowDimensions(getWindowDimensions())\n    }\n    \n    window.addEventListener('resize', handleResize)\n    setWindowDimensions(getWindowDimensions())\n    return () => window.removeEventListener('resize', handleResize)\n  }, [])\n\n  return windowDimensions\n}","import both from 'ramda/src/both'\nimport compose from 'ramda/src/compose'\nimport find from 'ramda/src/find'\nimport prop from 'ramda/src/prop'\nimport propEq from 'ramda/src/propEq'\nimport React, {useState} from 'react'\nimport PropTypes from 'prop-types'\nimport {graphql, navigate, Link} from 'gatsby'\nimport Img from 'gatsby-image'\nimport Layout from '../components/layout/Layout'\nimport PhotoStyles from '../styles/Photo'\nimport {isNotNil} from '../util/ramda-utils'\nimport {pathToFileTitle, removePathPrefix, removeFileExtension} from '../util/url-text'\nimport useKeyUp from '../hooks/use-key-up'\nimport useSwipeNavigate from '../hooks/use-swipe-navigate'\nimport { TransformWrapper, TransformComponent } from 'react-zoom-pan-pinch'\nimport useWindowDimensions from '../hooks/use-window-dimensions'\nimport photoDimensions from '../util/photo-dimensions'\n\nconst Photo = ({data, path, pageContext}) => {\n  const pathPrefix = data.site.pathPrefix\n  path = compose(\n    removeFileExtension, removePathPrefix(pathPrefix), decodeURI\n  )(path)\n  const title = pathToFileTitle(path)\n  const windowDimensions = useWindowDimensions()\n  const dimensions = photoDimensions(windowDimensions, pageContext)\n  const previousUrl = pageContext.file.previousUrl\n  const nextUrl = pageContext.file.nextUrl\n  const parentUrl = pageContext.file.parentUrl\n  const keyUpActions = [\n    {navigateTo: parentUrl, wasPressed: useKeyUp('ArrowUp')},\n    {navigateTo: previousUrl, wasPressed: useKeyUp('ArrowLeft')},\n    {navigateTo: nextUrl, wasPressed: useKeyUp('ArrowRight')},\n  ]\n  const keyboardAction = find(\n    both(\n      compose(isNotNil, prop('navigateTo')),\n      propEq('wasPressed', true)\n    ),\n    keyUpActions\n  )\n  if (keyboardAction) {\n    navigate(keyboardAction.navigateTo)\n  }\n  const [swipeDisabled, setSwipeDisabled] = useState(false)\n  const panDisabled = !swipeDisabled\n  const swipeNavigation = useSwipeNavigate(nextUrl, previousUrl, parentUrl)\n  const swipeHandlers = swipeDisabled ? {} : swipeNavigation\n  const handleZoomChange = zoom => {\n    if (zoom.scale === 1) {\n      setSwipeDisabled(false)\n    }\n    else {\n      setSwipeDisabled(true)\n    }\n  }\n  \n  return (\n    <Layout path={path}>\n      <div data-testid={path} {...swipeHandlers}>\n        <PhotoStyles height={windowDimensions.height}>\n          {previousUrl ?\n            <div className='photo-navigation previous'>\n              <div><Link to={previousUrl}>◄</Link></div>\n            </div> \n            : null}\n          <TransformWrapper onZoomChange={handleZoomChange} pan={{disabled: panDisabled}} doubleClick={{mode: 'reset'}}>\n            <TransformComponent>\n              <Img fixed={data.photo.childImageSharp.fixed} alt={title} title={title}\n                loading='eager' css={dimensions} draggable={false} />\n            </TransformComponent>\n          </TransformWrapper>\n          {parentUrl ?\n            <div className='photo-navigation parent'>\n              <div><Link to={parentUrl}>⯅</Link></div>\n            </div>\n            : null}\n          {nextUrl ?\n            <div className='photo-navigation next'>\n              <div><Link to={nextUrl}>►</Link></div>\n            </div>\n            : null}\n        </PhotoStyles>\n      </div>\n    </Layout>\n  )\n}\n\nexport const query = graphql`\n  query photoQuery($relativePath: String!, $width: Int!, $height: Int!) {\n    site {\n      pathPrefix\n    }\n    photo: file(relativePath: {eq: $relativePath}) {\n      childImageSharp {\n        fixed(width: $width, height: $height) {\n          ...GatsbyImageSharpFixed\n        }\n      }\n    }\n  }\n`\n\nPhoto.propTypes = {\n  path: PropTypes.string.isRequired,\n  data: PropTypes.shape({\n    site: PropTypes.shape({\n      pathPrefix: PropTypes.string.isRequired,\n    }),\n    photo: PropTypes.shape({\n      childImageSharp: PropTypes.shape({\n        fixed: PropTypes.shape({\n          src: PropTypes.string.isRequired,\n          srcSet: PropTypes.string.isRequired,\n          width: PropTypes.number.isRequired,\n          height: PropTypes.number.isRequired,\n        }).isRequired\n      })\n    })\n  }),\n  pageContext: PropTypes.shape({\n    width: PropTypes.number.isRequired,\n    height: PropTypes.number.isRequired,\n    file: PropTypes.shape({\n      previousUrl: PropTypes.string,\n      nextUrl: PropTypes.string,\n      parentUrl: PropTypes.string,\n    }),\n  }).isRequired\n}\n\nexport default Photo","export default (windowDimensions, pageContext) => {\n  const {width, height} = windowDimensions\n  const ratio = pageContext.width / pageContext.height\n  if (pageContext.width < width && pageContext.height < height)\n    return {maxWidth: width, maxHeight: height}\n  const excessWidthFactor = (pageContext.width - width) / width\n  const excessHeightFactor = (pageContext.height - height) / height\n  return excessWidthFactor > excessHeightFactor\n    ? {maxWidth: width, maxHeight: width / ratio}\n    : {maxWidth: height * ratio, maxHeight: height}\n}","function _reduced(x) {\n  return x && x['@@transducer/reduced'] ? x : {\n    '@@transducer/value': x,\n    '@@transducer/reduced': true\n  };\n}\n\nmodule.exports = _reduced;","var _curry2 = /*#__PURE__*/require(\"./internal/_curry2\");\n\nvar _dispatchable = /*#__PURE__*/require(\"./internal/_dispatchable\");\n\nvar _xfind = /*#__PURE__*/require(\"./internal/_xfind\");\n/**\n * Returns the first element of the list which matches the predicate, or\n * `undefined` if no element matches.\n *\n * Dispatches to the `find` method of the second argument, if present.\n *\n * Acts as a transducer if a transformer is given in list position.\n *\n * @func\n * @memberOf R\n * @since v0.1.0\n * @category List\n * @sig (a -> Boolean) -> [a] -> a | undefined\n * @param {Function} fn The predicate function used to determine if the element is the\n *        desired one.\n * @param {Array} list The array to consider.\n * @return {Object} The element found, or `undefined`.\n * @see R.transduce\n * @example\n *\n *      const xs = [{a: 1}, {a: 2}, {a: 3}];\n *      R.find(R.propEq('a', 2))(xs); //=> {a: 2}\n *      R.find(R.propEq('a', 4))(xs); //=> undefined\n */\n\n\nvar find = /*#__PURE__*/_curry2( /*#__PURE__*/_dispatchable(['find'], _xfind, function find(fn, list) {\n  var idx = 0;\n  var len = list.length;\n\n  while (idx < len) {\n    if (fn(list[idx])) {\n      return list[idx];\n    }\n\n    idx += 1;\n  }\n}));\n\nmodule.exports = find;","var _curry2 = /*#__PURE__*/require(\"./internal/_curry2\");\n/**\n * Returns `true` if both arguments are `true`; `false` otherwise.\n *\n * @func\n * @memberOf R\n * @since v0.1.0\n * @category Logic\n * @sig a -> b -> a | b\n * @param {Any} a\n * @param {Any} b\n * @return {Any} the first argument if it is falsy, otherwise the second argument.\n * @see R.both, R.xor\n * @example\n *\n *      R.and(true, true); //=> true\n *      R.and(true, false); //=> false\n *      R.and(false, true); //=> false\n *      R.and(false, false); //=> false\n */\n\n\nvar and = /*#__PURE__*/_curry2(function and(a, b) {\n  return a && b;\n});\n\nmodule.exports = and;","var _curry3 = /*#__PURE__*/require(\"./internal/_curry3\");\n\nvar equals = /*#__PURE__*/require(\"./equals\");\n/**\n * Returns `true` if the specified object property is equal, in\n * [`R.equals`](#equals) terms, to the given value; `false` otherwise.\n * You can test multiple properties with [`R.whereEq`](#whereEq).\n *\n * @func\n * @memberOf R\n * @since v0.1.0\n * @category Relation\n * @sig String -> a -> Object -> Boolean\n * @param {String} name\n * @param {*} val\n * @param {*} obj\n * @return {Boolean}\n * @see R.whereEq, R.propSatisfies, R.equals\n * @example\n *\n *      const abby = {name: 'Abby', age: 7, hair: 'blond'};\n *      const fred = {name: 'Fred', age: 12, hair: 'brown'};\n *      const rusty = {name: 'Rusty', age: 10, hair: 'brown'};\n *      const alois = {name: 'Alois', age: 15, disposition: 'surly'};\n *      const kids = [abby, fred, rusty, alois];\n *      const hasBrownHair = R.propEq('hair', 'brown');\n *      R.filter(hasBrownHair, kids); //=> [fred, rusty]\n */\n\n\nvar propEq = /*#__PURE__*/_curry3(function propEq(name, val, obj) {\n  return equals(val, obj[name]);\n});\n\nmodule.exports = propEq;"],"sourceRoot":""}